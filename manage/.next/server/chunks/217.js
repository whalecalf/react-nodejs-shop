exports.id=217,exports.ids=[217],exports.modules={13256:(e,n,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,26840,23)),Promise.resolve().then(s.t.bind(s,38771,23)),Promise.resolve().then(s.t.bind(s,13225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,43982,23))},50727:(e,n,s)=>{Promise.resolve().then(s.bind(s,67502))},10910:(e,n,s)=>{"use strict";s.d(n,{g:()=>l});var t=s(84255);async function l(e){return t.Z.post("/api/upload",e)}},43965:(e,n,s)=>{"use strict";s.d(n,{DZ:()=>c,M_:()=>r,RF:()=>o,lE:()=>i,pf:()=>d,x4:()=>u});var t=s(84255),l=s(96806),a=s.n(l);async function i(e){return t.Z.get(`/api/users?${a().stringify(e)}`)}async function o(e){return t.Z.post("/api/users",e)}async function r(e){return t.Z.get(`/api/users/${e}`)}async function c(e){return t.Z.delete(`/api/users/${e}`)}async function d(e,n){return t.Z.put(`/api/users/${e}`,n)}async function u(e){return t.Z.post("/api/users/login",e)}},67502:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>P});var t=s(95344),l=s(40759),a=s.n(l);s(23824),s(92616);var i=s(3729),o=s.n(i),r=s(2014),c=s(93465),d=s(89131),u=s(52148),m=s(59748),h=s(10707),f=s(3257),p=s.n(f),x=s(8428),g=s(90978),j=s.n(g),v=s(56506),y=s(50321);s(40148);let{Header:b,Content:N,Sider:Z}=c.default;var E=[];function k({children:e}){let n=(0,x.useRouter)(),[s,l]=(0,i.useState)({info:{nickName:""}}),a=JSON.parse(localStorage.getItem("user")||"").info.role;(0,i.useEffect)(()=>{E=a===y.N1.SELLER?[{key:"goods",icon:o().createElement("div",{className:"iconfont icon-shangpin-"}),label:`商品管理`,children:[{label:"商品列表",key:"/goods",icon:o().createElement("div",{className:"iconfont icon-shangpinliebiao"})},{label:"商品添加",key:"/goods/add",icon:o().createElement("div",{className:"iconfont icon-add-line"})}]},{key:"store",icon:o().createElement("div",{className:"iconfont icon-dianpu"}),label:`店铺管理`,children:[{label:"店铺列表",key:"/store",icon:o().createElement("div",{className:"iconfont icon-shangpinliebiao"})},{label:"订单列表",key:"/store/order",icon:o().createElement("div",{className:"iconfont icon-add-line"})}]}]:[{key:"log",icon:o().createElement("div",{className:"iconfont icon-rizhi"}),label:`日志管理`,children:[{label:"日志列表",key:"/log",icon:o().createElement("div",{className:"iconfont icon-shangpinliebiao"})},{label:"日志添加",key:"/log/add",icon:o().createElement("div",{className:"iconfont icon-add-line"})}]},{key:"category",icon:o().createElement("div",{className:"iconfont icon-fenlei"}),label:`分类管理`,children:[{label:"分类列表",key:"/category",icon:o().createElement("div",{className:"iconfont icon-shangpinliebiao"})},{label:"分类添加",key:"/category/add",icon:o().createElement("div",{className:"iconfont icon-add-line"})}]},{key:"user",icon:o().createElement("div",{className:"iconfont icon-yonghu"}),label:`用户管理`,children:[{label:"用户列表",key:"/user",icon:o().createElement("div",{className:"iconfont icon-shangpinliebiao"})},{label:"用户添加",key:"/user/add",icon:o().createElement("div",{className:"iconfont icon-add-line"})}]}]},[]);let f=[{key:"1",label:t.jsx(v.default,{href:"/user/edit/id",children:"用户中心"}),icon:o().createElement("div",{className:"iconfont icon-yonghu"})},{key:"2",label:t.jsx("span",{onClick:async()=>{localStorage?.removeItem("user"),d.ZP.success("登出成功"),n.push("/login")},children:"退出"}),icon:o().createElement("div",{className:"iconfont icon-tuichudenglu"})}],g=(0,x.usePathname)();return(0,i.useEffect)(()=>{},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(j(),{children:[t.jsx("title",{children:"Create Next App"}),t.jsx("meta",{name:"description",content:"Generated by create next app"}),t.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),t.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)(c.default,{className:p().sectionInner,children:[(0,t.jsxs)(b,{style:{display:"flex",alignItems:"center"},children:[t.jsx("div",{className:p().logo,children:"商城后台管理系统"}),t.jsx(u.Z,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],style:{flex:1,minWidth:0}}),t.jsx("span",{className:p().userinfo,children:t.jsx(m.Z,{menu:{items:f},children:t.jsx("a",{onClick:e=>e.preventDefault(),children:(0,t.jsxs)(h.Z,{children:[s?.info?.nickName?s?.info?.nickName:"用户名",t.jsx(r.Z,{})]})})})})]}),t.jsx(N,{children:(0,t.jsxs)(c.default,{className:p().sectionContent,children:[t.jsx(Z,{style:{background:"#fff"},children:t.jsx(u.Z,{mode:"inline",defaultSelectedKeys:[a===y.N1.SELLER?"/goods":"/log"],defaultOpenKeys:[a===y.N1.SELLER?"/goods":"/log"],selectedKeys:[g],style:{height:"100vh"},items:E,onClick:({key:e})=>{n.push(e)}})}),t.jsx(N,{className:p().content,children:e})]})})]})]})}function P({children:e}){let n=(0,x.usePathname)(),[s,l]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{l(!1)},[e]),s)?t.jsx("html",{lang:"en",children:t.jsx("body",{className:a().className,children:(0,t.jsxs)("div",{className:"loading-wrap",children:[t.jsx("div",{className:"loading"}),t.jsx("div",{className:"loading-text",children:"loading..."})]})})}):t.jsx("html",{lang:"en",children:t.jsx("body",{className:a().className,children:"/login"===n||"/sign"===n?t.jsx("div",{children:e}):t.jsx(k,{children:e})})})}},60551:(e,n,s)=>{"use strict";s.d(n,{Z:()=>i});var t=s(95344);s(3729);var l=s(2224),a=s.n(l);function i({children:e,title:n,operation:s}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:a().title,children:[n,t.jsx("span",{className:a().btn,children:s})]}),t.jsx("div",{className:a().content,children:e})]})}},14947:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>y});var t=s(95344),l=s(3729),a=s(85787),i=s(89131),o=s(54401),r=s(95905),c=s(49109),d=s(96804),u=s(8428),m=s(84270),h=s.n(m),f=s(60551),p=s(43965),x=s(50321),g=s(31529),j=s(58535),v=s(10910);function y({title:e,editData:n={sex:x.Om.MALE,status:x.iy.ON,role:x.N1.BUYER,_id:""}}){let s=(0,u.useRouter)(),[m]=a.Z.useForm(),[y,b]=(0,l.useState)(!1),[N,Z]=(0,l.useState)(),[E,k]=(0,l.useState)(!1),[P,_]=(0,l.useState)(""),[S,L]=(0,l.useState)(""),[I,w]=(0,l.useState)([]);(0,l.useEffect)(()=>{console.log(n),n._id&&m.setFieldsValue(n)},[n,m]);let C=async e=>{console.log(e),n._id?(e.avatar=N||"",await (0,p.pf)(n._id,e),i.ZP.success("更新成功")):(e.avatar=N||"",await (0,p.RF)(e),i.ZP.success("创建成功")),s.push("/user")};(0,l.useEffect)(()=>{(async()=>{await (0,v.g)().then(e=>{console.log("token",e.data.token),L(e.data.token)})})()},[]);let F=(0,t.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[y?t.jsx(g.Z,{}):t.jsx(j.Z,{}),t.jsx("div",{style:{marginTop:8},children:"上传"})]});return t.jsx(f.Z,{title:e,children:(0,t.jsxs)(a.Z,{labelCol:{span:4},wrapperCol:{span:16},layout:"horizontal",onFinish:C,initialValues:n,form:m,children:[t.jsx(a.Z.Item,{label:"账号",name:"name",rules:[{required:!0,message:"请输入账号"}],children:t.jsx(o.default,{placeholder:"请输入"})}),t.jsx(a.Z.Item,{label:"名称",name:"nickName",rules:[{required:!0,message:"请输入名称"}],children:t.jsx(o.default,{placeholder:"请输入"})}),t.jsx(a.Z.Item,{label:"性别",name:"sex",rules:[{required:!0,message:"请选择性别"}],children:(0,t.jsxs)(r.ZP.Group,{children:[t.jsx(r.ZP,{value:"male",children:"男"}),t.jsx(r.ZP,{value:"female",children:"女"})]})}),t.jsx(a.Z.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:t.jsx(o.default.Password,{placeholder:"请输入"})}),t.jsx(a.Z.Item,{label:"状态",name:"status",rules:[{required:!0,message:"请选择状态"}],children:(0,t.jsxs)(r.ZP.Group,{children:[t.jsx(r.ZP,{value:"on",children:"正常"}),t.jsx(r.ZP,{value:"off",children:"禁用"})]})}),t.jsx(a.Z.Item,{label:"角色",name:"role",rules:[{required:!0,message:"请选择角色"}],children:(0,t.jsxs)(r.ZP.Group,{children:[t.jsx(r.ZP,{value:"buyer",children:"买家"}),t.jsx(r.ZP,{value:"seller",children:"商家"}),t.jsx(r.ZP,{value:"admin",children:"管理员"})]})}),t.jsx(a.Z.Item,{label:"手机号",name:"phone",rules:[{required:!0,message:"请输入手机号"}],children:t.jsx(o.default,{placeholder:"请输入手机号"})}),t.jsx(a.Z.Item,{label:"头像",name:"avatar",children:t.jsx(c.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",action:"http://upload-z2.qiniup.com",data:{token:S},beforeUpload:e=>{let n="image/jpeg"===e.type||"image/png"===e.type;return n||i.ZP.error("You can only upload JPG/PNG file!"),n},fileList:I,onPreview:e=>{console.log(e),_(e.url||e.thumbUrl),k(!0)},onChange:e=>{let n=e.file,s=e.fileList;console.log("fileList",e.fileList);let{uid:t,name:l,type:a,thumbUrl:i,status:o,response:r={}}=n,c={uid:t,name:l,type:a,thumbUrl:i,status:o,url:"http://sbwwsba9t.hn-bkt.clouddn.com/"+(r.hash||"")};s.pop(),s.push(c),Z(c.url),console.log(s),w([...s])},onRemove:e=>{console.log(e);let n=I.indexOf(e);console.log(n),-1!==n&&(I.splice(n,1),_("")),w(I)},children:I.length>=1||n?.avatar?n?.avatar?t.jsx("img",{src:n?.avatar,alt:""}):"":F})}),t.jsx(a.Z.Item,{colon:!1,children:t.jsx(d.ZP,{size:"large",htmlType:"submit",className:h().btn,children:n?._id?"更新":"创建"})})]})})}},50321:(e,n,s)=>{"use strict";var t,l,a,i;s.d(n,{Em:()=>o,N1:()=>l,Om:()=>t,Q_:()=>i,iy:()=>a}),function(e){e.MALE="male",e.FEMALE="female"}(t||(t={})),function(e){e.BUYER="buyer",e.SELLER="seller",e.ADMIN="admin"}(l||(l={})),function(e){e.ON="on",e.OFF="off"}(a||(a={})),function(e){e.ON="on",e.OFF="off"}(i||(i={}));let o=[{label:"正常",value:"on"},{label:"禁用",value:"off"}]},84255:(e,n,s)=>{"use strict";s.d(n,{Z:()=>i});var t=s(53608),l=s(97005),a=s(89131);let i=(e=>{let n=t.Z.create({timeout:5e3,...e});return n.interceptors.request.use(function(e){let n=localStorage.getItem("user"),s=n?JSON.parse(n).token:"";return e.headers.Authorization="Bearer "+s,e},function(e){return Promise.reject(e)}),n.interceptors.response.use(function(e){let{status:n,data:s,message:t}=e;return 200===n?s:401===n?l.default.push("/login"):void a.ZP.error(t||"服务端异常")},function(e){return e.response&&401===e.response.status?l.default.push("/login"):(a.ZP.error(e?.response?.data?.message||"服务端异常"),Promise.reject(e))}),n})({})},2224:e=>{e.exports={content:"Content_content__iP7sw",title:"Content_title__y3NnI",btn:"Content_btn__bySTU"}},3257:e=>{e.exports={logo:"Layout_logo__W99B1",userinfo:"Layout_userinfo__Bv0ik",sectionInner:"Layout_sectionInner__uAN6Q",sectionContent:"Layout_sectionContent__pqQWV"}},84270:e=>{e.exports={btn:"UserForm_btn__5o2Sp"}},21342:(e,n,s)=>{"use strict";s.r(n),s.d(n,{$$typeof:()=>a,__esModule:()=>l,default:()=>i});let t=(0,s(86843).createProxy)(String.raw`D:\毕业论文相关\shop\manage\src\app\layout.tsx`),{__esModule:l,$$typeof:a}=t,i=t.default},73881:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>l});var t=s(70337);let l=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},23824:()=>{},40148:()=>{}};