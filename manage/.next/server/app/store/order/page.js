(()=>{var e={};e.id=384,e.ids=[384],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},66260:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=r(50482),a=r(69108),n=r(62563),i=r.n(n),o=r(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["store",{children:["order",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,92307)),"D:\\毕业论文相关\\shop\\manage\\src\\app\\store\\order\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,21342)),"D:\\毕业论文相关\\shop\\manage\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\毕业论文相关\\shop\\manage\\src\\app\\store\\order\\page.tsx"],u="/store/order/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/store/order/page",pathname:"/store/order",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4009:(e,t,r)=>{Promise.resolve().then(r.bind(r,32253))},27976:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=r(73371).Z},63724:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=r(70465).Z},64113:(e,t,r)=>{"use strict";r.d(t,{Ge:()=>c,Ou:()=>l,Y:()=>o,od:()=>i,wZ:()=>d});var s=r(84255),a=r(96806),n=r.n(a);async function i(e){return s.Z.get(`/api/goods?${n().stringify(e)}`)}async function o(e){return s.Z.post("/api/goods",e)}async function l(e){return s.Z.delete(`/api/goods/${e}`)}async function d(e){return s.Z.get(`/api/goods/${e}`)}async function c(e,t){return s.Z.put(`/api/goods/${e}`,t)}},74874:(e,t,r)=>{"use strict";r.d(t,{FB:()=>o,Fw:()=>i,Pz:()=>d,s$:()=>l});var s=r(84255),a=r(96806),n=r.n(a);async function i(e){return s.Z.get(`/api/orders?${n().stringify(e)}`)}async function o(e){return s.Z.delete(`/api/orders/${e}`)}async function l(e){return s.Z.get(`/api/orders/${e}`)}async function d(e,t){return s.Z.put(`/api/orders/${e}`,t)}},32253:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>S});var s=r(95344),a=r(90377),n=r(17827),i=r(85787),o=r(93401),l=r(89131),d=r(10707),c=r(96804),u=r(63724),p=r(27976),x=r(54401),h=r(72472),g=r(5430),m=r(89410),f=r(8428),y=r(3729),Z=r(35700),w=r.n(Z),j=r(48869),b=r.n(j),v=r(60551),_=r(74874),P=r(64113);let q=[{label:"待付款",value:"unpaid"},{label:"已付款",value:"paid"},{label:"已发货",value:"delivered"},{label:"已收货",value:"recieved"},{label:"待退款",value:"waitRefund"},{label:"已退款",value:"refunded"}],k=[{title:"名称",dataIndex:"goods",key:"name",width:170,render:e=>e?.name},{title:"图片",dataIndex:"goods",key:"pics",width:200,render:e=>s.jsx(m.default,{src:e.pics[0].url,width:200,height:200,alt:""})},{title:"数量",dataIndex:"num",key:"num",width:80},{title:"状态",dataIndex:"status",key:"status",width:80,render:e=>{switch(e){case"unpaid":return s.jsx(a.Z,{color:"purple",children:"待付款"});case"paid":return s.jsx(a.Z,{color:"gold",children:"已付款"});case"delivered":return s.jsx(a.Z,{color:"green",children:"已发货"});case"received":return s.jsx(a.Z,{color:"blue",children:"已收货"});case"waitRefund":return s.jsx(a.Z,{color:"red",children:"待退款"});case"refunded":return s.jsx(a.Z,{children:"已退款"});default:return s.jsx(a.Z,{children:e})}}},{title:"交易金额",dataIndex:"num",key:"num",width:100,render:(e,t)=>(t.num*t.goods.price).toString()+"元"},{title:"买家",dataIndex:"buyer",key:"buyer",width:80},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",render:e=>b()(e).format("YYYY-MM-DD"),width:130},{title:"确认收货时间",dataIndex:"confirmedAt",key:"confirmedAt",render:e=>b()(e).format("YYYY-MM-DD"),width:130},{title:"订单评价",dataIndex:"comment",key:"comment",ellipsis:!0,render:e=>{console.log(e);let t=e?e.description:"-";return s.jsx(n.Z,{title:t,placement:"topLeft",children:t})},width:130}];function S(){let[e]=i.Z.useForm(),t=(0,f.useRouter)(),[r,a]=(0,y.useState)({current:1,pageSize:20,showSizeChanger:!0,total:0}),[n,m]=(0,y.useState)();async function Z(e){let t=await (0,_.Fw)({current:r.current,pageSize:r.pageSize,...e,seller:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"").info._id:""});console.log(t);let{data:s}=t;m(s.map(e=>({...e,buyer:e.buyer.nickName,name:e.goods.name}))),a({...r,current:1,total:t.total})}(0,y.useEffect)(()=>{Z(),(0,_.Fw)({all:!0}).then(e=>{})},[]);let j=e=>{t.push(`/store/order/edit/${e}`)},b=t=>{o.Z.confirm({title:"确定删除?",okText:"确定",cancelText:"取消",async onOk(){await (0,_.FB)(t),l.ZP.success("删除成功"),Z(e.getFieldsValue())}})},S=[...k,{title:"操作",key:"action",width:200,render:(e,t)=>(0,s.jsxs)(d.Z,{children:[s.jsx(c.ZP,{type:"link",onClick:()=>{j(t._id)},children:"详情"}),s.jsx(c.ZP,{type:"link",danger:!0,onClick:()=>b(t._id),children:"删除"})]})}],I=async e=>{console.log(e);let t=await (0,P.od)({name:e.goods});t.data[0]?e.goods=t.data[0]._id:e.goods="";let s=await (0,_.Fw)({...e,current:r.current,pageSize:r.pageSize});console.log(s),m(s.data.map(e=>({...e}))),a({...r,current:1,total:s.total})};return(0,s.jsxs)(v.Z,{title:"订单列表",children:[s.jsx(i.Z,{name:"search",form:e,onFinish:I,initialValues:{name:"",category:""},children:(0,s.jsxs)(u.Z,{gutter:24,children:[s.jsx(p.Z,{span:8,children:s.jsx(i.Z.Item,{name:"goods",label:"商品名称",children:s.jsx(x.default,{placeholder:"请输入",allowClear:!0})})}),s.jsx(p.Z,{span:8,children:s.jsx(i.Z.Item,{name:"status",label:"状态",children:s.jsx(h.default,{placeholder:"请选择",options:q,optionFilterProp:"label",allowClear:!0,showSearch:!0,style:{width:"150"}})})}),s.jsx(p.Z,{span:8,children:s.jsx(i.Z.Item,{children:(0,s.jsxs)(d.Z,{children:[s.jsx(c.ZP,{htmlType:"submit",children:"搜索"}),s.jsx(c.ZP,{onClick:()=>{e.resetFields()},htmlType:"submit",children:"清空"})]})})})]})}),s.jsx("div",{className:w().tablewrap,children:s.jsx(g.Z,{dataSource:n,columns:S,scroll:{x:1e3,y:500},pagination:{...r,showTotal:()=>`共 ${r.total} 条`},onChange:t=>{a(t);let r=e.getFieldsValue();(0,_.Fw)({current:t.current,pageSize:t.pageSize,...r,seller:JSON.parse(localStorage.getItem("user")||"")?.info._id})}})})]})}},35700:e=>{e.exports={tablewrap:"order_tablewrap__BHX2H"}},92307:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let s=(0,r(86843).createProxy)(String.raw`D:\毕业论文相关\shop\manage\src\app\store\order\page.tsx`),{__esModule:a,$$typeof:n}=s,i=s.default}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,934,337,411,787,671,806,962,905,299,214,410,986],()=>r(66260));module.exports=s})();