(()=>{var e={};e.id=572,e.ids=[572],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},18562:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>d,originalPathname:()=>p,pages:()=>u,routeModule:()=>x,tree:()=>c});var a=r(50482),s=r(69108),n=r(62563),i=r.n(n),o=r(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["category",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,16448)),"D:\\毕业论文相关\\shop\\manage\\src\\app\\category\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,21342)),"D:\\毕业论文相关\\shop\\manage\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["D:\\毕业论文相关\\shop\\manage\\src\\app\\category\\page.tsx"],p="/category/page",d={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/category/page",pathname:"/category",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},64899:(e,t,r)=>{Promise.resolve().then(r.bind(r,33028))},27976:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=r(73371).Z},63724:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=r(70465).Z},19962:(e,t,r)=>{"use strict";r.d(t,{AT:()=>i,GC:()=>o,lI:()=>l,m7:()=>c,y1:()=>u});var a=r(84255),s=r(96806),n=r.n(s);async function i(e){return a.Z.get(`/api/categories?${n().stringify(e)}`)}async function o(e){return a.Z.post("/api/categories",e)}async function l(e){return a.Z.delete(`/api/categories/${e}`)}async function c(e){return a.Z.get(`/api/categories/${e}`)}async function u(e,t){return a.Z.put(`/api/categories/${e}`,t)}},33028:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_});var a=r(95344),s=r(90377),n=r(85787),i=r(93401),o=r(89131),l=r(10707),c=r(96804),u=r(63724),p=r(27976),d=r(54401),x=r(72472),g=r(5430),h=r(8428),m=r(3729),y=r(57410),f=r.n(y),Z=r(48869),j=r.n(Z),q=r(19962),v=r(60551),w=r(25853);let P=[{title:"名称",dataIndex:"name",key:"name",width:170},{title:"级别",dataIndex:"level",key:"level",render:e=>a.jsx(s.Z,{color:1===e?"green":"cyan",children:`级别${e}`})},{title:"所属分类",dataIndex:"parent",key:"parent",width:120,render:e=>e?.name??"-"},{title:"创建",dataIndex:"createdAt",key:"createdAt",render:e=>j()(e).format("YYYY-MM-DD"),width:130}];function _(){let[e]=n.Z.useForm(),t=(0,h.useRouter)(),[r,s]=(0,m.useState)({current:1,pageSize:20,showSizeChanger:!0,total:0}),[y,Z]=(0,m.useState)();async function j(e){let t=await (0,q.AT)({current:r.current,pageSize:r.pageSize,...e});console.log(t);let{data:a}=t.data;Z(a),s({...r,current:r.current,total:a.total})}(0,m.useEffect)(()=>{j()},[]);let _=async t=>{s(t);let r=e.getFieldsValue(),a=await (0,q.AT)({current:t.current,pageSize:t.pageSize,...r});console.log(a);let{data:n}=a;Z(n)},b=e=>{t.push(`/category/edit/${e}`)},k=t=>{i.Z.confirm({title:"确定删除?",okText:"确定",cancelText:"取消",async onOk(){await (0,q.lI)(t),o.ZP.success("删除成功"),j(e.getFieldsValue())}})},S=[...P,{title:"操作",key:"action",render:(e,t)=>(0,a.jsxs)(l.Z,{children:[a.jsx(c.ZP,{type:"link",onClick:()=>{b(t._id)},children:"编辑"}),a.jsx(c.ZP,{type:"link",danger:!0,onClick:()=>{k(t._id)},children:"删除"})]})}],T=async e=>{let t=await (0,q.AT)({...e,current:r.current,pageSize:r.pageSize});Z(t.data),s({...r,current:1,total:t.data.total})};return(0,a.jsxs)(v.Z,{title:"分类列表",operation:a.jsx(c.ZP,{onClick:()=>{t.push("/category/add")},children:"添加"}),children:[a.jsx(n.Z,{name:"search",form:e,onFinish:T,initialValues:{name:"",category:""},children:(0,a.jsxs)(u.Z,{gutter:24,children:[a.jsx(p.Z,{span:8,children:a.jsx(n.Z.Item,{name:"name",label:"名称",children:a.jsx(d.default,{placeholder:"请输入",allowClear:!0})})}),a.jsx(p.Z,{span:8,children:a.jsx(n.Z.Item,{name:"level",label:"级别",children:a.jsx(x.default,{placeholder:"请选择",options:w.B,allowClear:!0,showSearch:!0,style:{width:"150"}})})}),a.jsx(p.Z,{span:8,children:a.jsx(n.Z.Item,{children:(0,a.jsxs)(l.Z,{children:[a.jsx(c.ZP,{htmlType:"submit",children:"搜索"}),a.jsx(c.ZP,{onClick:()=>{console.log(e),e.resetFields()},htmlType:"submit",children:"清空"})]})})})]})}),a.jsx("div",{className:f().tablewrap,children:a.jsx(g.Z,{dataSource:y,columns:S,scroll:{x:1e3,y:500},pagination:{...r,showTotal:()=>`共 ${r.total} 条`},onChange:_})})]})}},25853:(e,t,r)=>{"use strict";r.d(t,{B:()=>s});let a={ONE:1,TWO:2},s=[{label:"级别1",value:a.ONE},{label:"级别2",value:a.TWO}]},57410:e=>{e.exports={tablewrap:"category_tablewrap__Vr6oo"}},16448:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>s,default:()=>i});let a=(0,r(86843).createProxy)(String.raw`D:\毕业论文相关\shop\manage\src\app\category\page.tsx`),{__esModule:s,$$typeof:n}=a,i=a.default}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,934,337,411,787,671,806,962,905,299,214,986],()=>r(18562));module.exports=a})();