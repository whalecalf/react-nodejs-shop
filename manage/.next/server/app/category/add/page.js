(()=>{var e={};e.id=817,e.ids=[817],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},11305:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>m,tree:()=>u});var r=s(50482),a=s(69108),o=s(62563),n=s.n(o),i=s(68300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let u=["",{children:["category",{children:["add",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,82126)),"D:\\毕业论文相关\\shop\\manage\\src\\app\\category\\add\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,21342)),"D:\\毕业论文相关\\shop\\manage\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\毕业论文相关\\shop\\manage\\src\\app\\category\\add\\page.tsx"],d="/category/add/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/category/add/page",pathname:"/category/add",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},26761:(e,t,s)=>{Promise.resolve().then(s.bind(s,49629))},49629:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>q});var r=s(95344),a=s(3729),o=s(85787),n=s(89131),i=s(54401),l=s(72472),u=s(49109),c=s(93401),d=s(96804),p=s(31529),m=s(58535),x=s(8428),g=s(56106),h=s.n(g),f=s(60551),y=s(25853),b=s(19962),v=s(10910),j=s(46793);function q({title:e,data:t}){let s=(0,x.useRouter)(),[g,q]=(0,a.useState)(1),[_,P]=(0,a.useState)([]),[Z,w]=(0,a.useState)(!1),[C,E]=(0,a.useState)(""),[G]=o.Z.useForm(),[S,k]=(0,a.useState)(!1),[O,T]=(0,a.useState)(""),[I,N]=(0,a.useState)(""),[A,D]=(0,a.useState)([]);(0,a.useEffect)(()=>{console.log(t),t?._id&&G.setFieldsValue({...t})},[t,G]);let F=async e=>{console.log(e),e.icon=C,t?._id?(await (0,b.y1)(t?._id,e),n.ZP.success("更新成功")):(await (0,b.GC)(e),n.ZP.success("创建成功")),s.push("/category")};(0,a.useEffect)(()=>{(async function(){let e=await (0,b.AT)({all:!0,level:1});console.log(e),P(e.data)})()},[]);let z=(0,a.useMemo)(()=>_.map(e=>({value:e._id,label:e.name})),[_]);(0,a.useEffect)(()=>{(async()=>{await (0,v.g)().then(e=>{console.log("token",e.data.token),N(e.data.token)})})()},[]);let L=(0,r.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[Z?r.jsx(p.Z,{}):r.jsx(m.Z,{}),r.jsx("div",{style:{marginTop:8},children:"上传"})]});return r.jsx(f.Z,{title:e,children:(0,r.jsxs)(o.Z,{labelCol:{span:8},wrapperCol:{span:16},layout:"horizontal",onFinish:F,form:G,children:[r.jsx(o.Z.Item,{label:"名称",name:"name",rules:[{required:!0,message:"请输入名称"}],children:r.jsx(i.default,{placeholder:"请输入"})}),r.jsx(o.Z.Item,{label:"级别",name:"level",rules:[{required:!0,message:"请选择级别"}],children:r.jsx(l.default,{onChange:e=>{q(e)},options:y.B,placeholder:"请选择",disabled:!!t?._id})}),(2==g||t?.level===2)&&r.jsx(o.Z.Item,{label:"所属级别",name:"parent",rules:[{required:!0,message:"请选择级别"}],children:r.jsx(l.default,{options:z,placeholder:"请选择",children:r.jsx(l.default.Option,{value:"demo",children:"Demo"})})}),(2==g||t?.level===2)&&r.jsx(o.Z.Item,{label:"分类图标",name:"icon",rules:[{required:!0,message:"请选择图片"}],children:r.jsx(u.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",action:"http://upload-z2.qiniup.com",data:{token:I},beforeUpload:e=>{let t="image/jpeg"===e.type||"image/png"===e.type;return t||n.ZP.error("You can only upload JPG/PNG file!"),t},fileList:A,onPreview:e=>{console.log(e),T(e.url||e.thumbUrl),k(!0)},onChange:e=>{let t=e.file,s=e.fileList;console.log("fileList",e.fileList);let{uid:r,name:a,type:o,thumbUrl:n,status:i,response:l={}}=t,u={uid:r,name:a,type:o,thumbUrl:n,status:i,url:j._+(l.hash||"")};E(u.url||u.thumbUrl),s.pop(),s.push(u),console.log(s),D([...s])},onRemove:e=>{console.log(e);let t=A.indexOf(e);-1!==t&&A.splice(t,1),D([...A])},maxCount:1,children:A.length>=1||t?.icon?t?.icon?r.jsx("img",{src:t?.icon,alt:""}):"":L})}),r.jsx(o.Z.Item,{children:r.jsx(c.Z,{open:S,title:"预览",footer:null,onCancel:()=>{k(!1)},children:r.jsx("img",{alt:"example",style:{width:"100%"},src:O})})}),r.jsx(o.Z.Item,{colon:!1,children:r.jsx(d.ZP,{size:"large",htmlType:"submit",className:h().btn,children:t?._id?"更新":"创建"})})]})})}},25853:(e,t,s)=>{"use strict";s.d(t,{B:()=>a});let r={ONE:1,TWO:2},a=[{label:"级别1",value:r.ONE},{label:"级别2",value:r.TWO}]},56106:e=>{e.exports={btn:"CategoryForm_btn__kYNid"}},82126:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(25036);let a=(0,s(86843).createProxy)(String.raw`D:\毕业论文相关\shop\manage\src\components\CategoryForm\index.tsx`),{__esModule:o,$$typeof:n}=a,i=a.default;function l(){return r.jsx(i,{title:"分类添加"})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,934,337,411,787,671,806,962,299,102,242],()=>s(11305));module.exports=r})();