(()=>{var e={};e.id=801,e.ids=[801],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},98622:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>r.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=n(50482),i=n(69108),a=n(62563),r=n.n(a),o=n(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);n.d(t,l);let c=["",{children:["goods",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,36405)),"D:\\毕业论文相关\\shop\\manage\\src\\app\\goods\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(n.bind(n,21342)),"D:\\毕业论文相关\\shop\\manage\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\毕业论文相关\\shop\\manage\\src\\app\\goods\\page.tsx"],u="/goods/page",p={require:n,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/goods/page",pathname:"/goods",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},13256:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,2583,23)),Promise.resolve().then(n.t.bind(n,26840,23)),Promise.resolve().then(n.t.bind(n,38771,23)),Promise.resolve().then(n.t.bind(n,13225,23)),Promise.resolve().then(n.t.bind(n,9295,23)),Promise.resolve().then(n.t.bind(n,43982,23))},53836:(e,t,n)=>{Promise.resolve().then(n.bind(n,70019))},50727:(e,t,n)=>{Promise.resolve().then(n.bind(n,67502))},27976:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});let s=n(73371).Z},63724:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});let s=n(70465).Z},19962:(e,t,n)=>{"use strict";n.d(t,{AT:()=>r,GC:()=>o,lI:()=>l,m7:()=>c,y1:()=>d});var s=n(84255),i=n(96806),a=n.n(i);async function r(e){return s.Z.get(`/api/categories?${a().stringify(e)}`)}async function o(e){return s.Z.post("/api/categories",e)}async function l(e){return s.Z.delete(`/api/categories/${e}`)}async function c(e){return s.Z.get(`/api/categories/${e}`)}async function d(e,t){return s.Z.put(`/api/categories/${e}`,t)}},64113:(e,t,n)=>{"use strict";n.d(t,{Ge:()=>d,Ou:()=>l,Y:()=>o,od:()=>r,wZ:()=>c});var s=n(84255),i=n(96806),a=n.n(i);async function r(e){return s.Z.get(`/api/goods?${a().stringify(e)}`)}async function o(e){return s.Z.post("/api/goods",e)}async function l(e){return s.Z.delete(`/api/goods/${e}`)}async function c(e){return s.Z.get(`/api/goods/${e}`)}async function d(e,t){return s.Z.put(`/api/goods/${e}`,t)}},70019:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>P});var s=n(95344),i=n(17827),a=n(85787),r=n(93401),o=n(89131),l=n(10707),c=n(96804),d=n(63724),u=n(27976),p=n(54401),m=n(72472),h=n(5430),g=n(89410),x=n(8428),f=n(3729),y=n(67030),v=n.n(y),j=n(48869),b=n.n(j),k=n(64113),N=n(60551),Z=n(19962);let _=[{title:"名称",dataIndex:"name",key:"name",width:170},{title:"图片",dataIndex:"pics",key:"pics",width:300,render:e=>{var t;return e.length>0&&(t=s.jsx(g.default,{src:e[0].url,width:200,height:200,alt:""})),t}},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0,width:300,render:e=>s.jsx(i.Z,{title:e,placement:"topLeft",children:e})},{title:"分类",dataIndex:"category",key:"category",width:150,render:e=>e?.name},{title:"价格",dataIndex:"price",key:"price",width:80},{title:"库存",dataIndex:"stock",key:"stock",width:80},{title:"上架时间",dataIndex:"createdAt",key:"createdAt",render:e=>b()(e).format("YYYY-MM-DD"),width:130}];function P(){let[e]=a.Z.useForm(),t=(0,x.useRouter)(),[n,i]=(0,f.useState)({current:1,pageSize:20,showSizeChanger:!0,total:0}),[g,y]=(0,f.useState)(),[j,b]=(0,f.useState)([]);async function P(e){let t=await (0,k.od)({current:n.current,pageSize:n.pageSize,...e});console.log(t);let{data:s}=t;y(s),i({...n,current:1,total:t.total})}(0,f.useEffect)(()=>{P(),(0,Z.AT)({all:!0}).then(e=>{console.log(e),b(e.data.data)})},[]);let E=async t=>{i(t);let n=e.getFieldValue(name);y((await (0,k.od)({current:t.current,pageSize:t.pageSize,...n})).data)},w=e=>{t.push(`/goods/edit/${e}`)},S=t=>{r.Z.confirm({title:"确定删除?",okText:"确定",cancelText:"取消",async onOk(){await (0,k.Ou)(t),o.ZP.success("删除成功"),P(e.getFieldsValue())}})},q=[..._,{title:"操作",key:"action",render:(e,t)=>(0,s.jsxs)(l.Z,{children:[s.jsx(c.ZP,{type:"link",onClick:()=>{w(t._id)},children:"编辑"}),s.jsx(c.ZP,{type:"link",danger:!0,onClick:()=>S(t._id),children:"删除"})]})}],C=async e=>{let t=await (0,k.od)({...e,current:n.current,pageSize:n.pageSize});y(t.data),i({...n,current:1,total:t.total})};return(0,s.jsxs)(N.Z,{title:"商品列表",operation:s.jsx(c.ZP,{onClick:()=>{t.push("/goods/add")},children:"添加"}),children:[s.jsx(a.Z,{name:"search",form:e,onFinish:C,initialValues:{name:"",category:""},children:(0,s.jsxs)(d.Z,{gutter:24,children:[s.jsx(u.Z,{span:8,children:s.jsx(a.Z.Item,{name:"name",label:"名称",children:s.jsx(p.default,{placeholder:"请输入",allowClear:!0})})}),s.jsx(u.Z,{span:8,children:s.jsx(a.Z.Item,{name:"category",label:"分类",children:s.jsx(m.default,{placeholder:"请选择",options:j.map(e=>({label:e.name,value:e._id})),optionFilterProp:"label",allowClear:!0,showSearch:!0,style:{width:"150"}})})}),s.jsx(u.Z,{span:8,children:s.jsx(a.Z.Item,{children:(0,s.jsxs)(l.Z,{children:[s.jsx(c.ZP,{htmlType:"submit",children:"搜索"}),s.jsx(c.ZP,{onClick:()=>{console.log(e),e.resetFields()},htmlType:"submit",children:"清空"})]})})})]})}),s.jsx("div",{className:v().tablewrap,children:s.jsx(h.Z,{dataSource:g,columns:q,scroll:{x:1e3,y:500},pagination:{...n,showTotal:()=>`共 ${n.total} 条`},onChange:E})})]})}},67502:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>P});var s=n(95344),i=n(40759),a=n.n(i);n(23824),n(92616);var r=n(3729),o=n.n(r),l=n(2014),c=n(93465),d=n(89131),u=n(52148),p=n(59748),m=n(10707),h=n(3257),g=n.n(h),x=n(8428),f=n(90978),y=n.n(f),v=n(56506),j=n(50321);n(40148);let{Header:b,Content:k,Sider:N}=c.default;var Z=[];function _({children:e}){let t=(0,x.useRouter)(),[n,i]=(0,r.useState)({info:{nickName:""}}),a=JSON.parse(localStorage.getItem("user")||"").info.role;(0,r.useEffect)(()=>{Z=a===j.N1.SELLER?[{key:"goods",icon:o().createElement("div",{className:"iconfont icon-shangpin-"}),label:`商品管理`,children:[{label:"商品列表",key:"/goods",icon:o().createElement("div",{className:"iconfont icon-shangpinliebiao"})},{label:"商品添加",key:"/goods/add",icon:o().createElement("div",{className:"iconfont icon-add-line"})}]},{key:"store",icon:o().createElement("div",{className:"iconfont icon-dianpu"}),label:`店铺管理`,children:[{label:"店铺列表",key:"/store",icon:o().createElement("div",{className:"iconfont icon-shangpinliebiao"})},{label:"订单列表",key:"/store/order",icon:o().createElement("div",{className:"iconfont icon-add-line"})}]}]:[{key:"log",icon:o().createElement("div",{className:"iconfont icon-rizhi"}),label:`日志管理`,children:[{label:"日志列表",key:"/log",icon:o().createElement("div",{className:"iconfont icon-shangpinliebiao"})},{label:"日志添加",key:"/log/add",icon:o().createElement("div",{className:"iconfont icon-add-line"})}]},{key:"category",icon:o().createElement("div",{className:"iconfont icon-fenlei"}),label:`分类管理`,children:[{label:"分类列表",key:"/category",icon:o().createElement("div",{className:"iconfont icon-shangpinliebiao"})},{label:"分类添加",key:"/category/add",icon:o().createElement("div",{className:"iconfont icon-add-line"})}]},{key:"user",icon:o().createElement("div",{className:"iconfont icon-yonghu"}),label:`用户管理`,children:[{label:"用户列表",key:"/user",icon:o().createElement("div",{className:"iconfont icon-shangpinliebiao"})},{label:"用户添加",key:"/user/add",icon:o().createElement("div",{className:"iconfont icon-add-line"})}]}]},[]);let h=[{key:"1",label:s.jsx(v.default,{href:"/user/edit/id",children:"用户中心"}),icon:o().createElement("div",{className:"iconfont icon-yonghu"})},{key:"2",label:s.jsx("span",{onClick:async()=>{localStorage?.removeItem("user"),d.ZP.success("登出成功"),t.push("/login")},children:"退出"}),icon:o().createElement("div",{className:"iconfont icon-tuichudenglu"})}],f=(0,x.usePathname)();return(0,r.useEffect)(()=>{},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(y(),{children:[s.jsx("title",{children:"Create Next App"}),s.jsx("meta",{name:"description",content:"Generated by create next app"}),s.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),s.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)(c.default,{className:g().sectionInner,children:[(0,s.jsxs)(b,{style:{display:"flex",alignItems:"center"},children:[s.jsx("div",{className:g().logo,children:"商城后台管理系统"}),s.jsx(u.Z,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],style:{flex:1,minWidth:0}}),s.jsx("span",{className:g().userinfo,children:s.jsx(p.Z,{menu:{items:h},children:s.jsx("a",{onClick:e=>e.preventDefault(),children:(0,s.jsxs)(m.Z,{children:[n?.info?.nickName?n?.info?.nickName:"用户名",s.jsx(l.Z,{})]})})})})]}),s.jsx(k,{children:(0,s.jsxs)(c.default,{className:g().sectionContent,children:[s.jsx(N,{style:{background:"#fff"},children:s.jsx(u.Z,{mode:"inline",defaultSelectedKeys:[a===j.N1.SELLER?"/goods":"/log"],defaultOpenKeys:[a===j.N1.SELLER?"/goods":"/log"],selectedKeys:[f],style:{height:"100vh"},items:Z,onClick:({key:e})=>{t.push(e)}})}),s.jsx(k,{className:g().content,children:e})]})})]})]})}function P({children:e}){let t=(0,x.usePathname)(),[n,i]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{i(!1)},[e]),n)?s.jsx("html",{lang:"en",children:s.jsx("body",{className:a().className,children:(0,s.jsxs)("div",{className:"loading-wrap",children:[s.jsx("div",{className:"loading"}),s.jsx("div",{className:"loading-text",children:"loading..."})]})})}):s.jsx("html",{lang:"en",children:s.jsx("body",{className:a().className,children:"/login"===t||"/sign"===t?s.jsx("div",{children:e}):s.jsx(_,{children:e})})})}},60551:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(95344);n(3729);var i=n(2224),a=n.n(i);function r({children:e,title:t,operation:n}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:a().title,children:[t,s.jsx("span",{className:a().btn,children:n})]}),s.jsx("div",{className:a().content,children:e})]})}},50321:(e,t,n)=>{"use strict";var s,i,a,r;n.d(t,{Em:()=>o,N1:()=>i,Om:()=>s,Q_:()=>r,iy:()=>a}),function(e){e.MALE="male",e.FEMALE="female"}(s||(s={})),function(e){e.BUYER="buyer",e.SELLER="seller",e.ADMIN="admin"}(i||(i={})),function(e){e.ON="on",e.OFF="off"}(a||(a={})),function(e){e.ON="on",e.OFF="off"}(r||(r={}));let o=[{label:"正常",value:"on"},{label:"禁用",value:"off"}]},84255:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(53608),i=n(97005),a=n(89131);let r=(e=>{let t=s.Z.create({timeout:5e3,...e});return t.interceptors.request.use(function(e){let t=localStorage.getItem("user"),n=t?JSON.parse(t).token:"";return e.headers.Authorization="Bearer "+n,e},function(e){return Promise.reject(e)}),t.interceptors.response.use(function(e){let{status:t,data:n,message:s}=e;return 200===t?n:401===t?i.default.push("/login"):void a.ZP.error(s||"服务端异常")},function(e){return e.response&&401===e.response.status?i.default.push("/login"):(a.ZP.error(e?.response?.data?.message||"服务端异常"),Promise.reject(e))}),t})({})},67030:e=>{e.exports={tablewrap:"goods_tablewrap__JBh2Q"}},2224:e=>{e.exports={content:"Content_content__iP7sw",title:"Content_title__y3NnI",btn:"Content_btn__bySTU"}},3257:e=>{e.exports={logo:"Layout_logo__W99B1",userinfo:"Layout_userinfo__Bv0ik",sectionInner:"Layout_sectionInner__uAN6Q",sectionContent:"Layout_sectionContent__pqQWV"}},36405:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>r});let s=(0,n(86843).createProxy)(String.raw`D:\毕业论文相关\shop\manage\src\app\goods\page.tsx`),{__esModule:i,$$typeof:a}=s,r=s.default},21342:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>r});let s=(0,n(86843).createProxy)(String.raw`D:\毕业论文相关\shop\manage\src\app\layout.tsx`),{__esModule:i,$$typeof:a}=s,r=s.default},73881:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var s=n(70337);let i=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},23824:()=>{},40148:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),s=t.X(0,[638,934,337,411,787,671,806,962,905,299,214,410],()=>n(98622));module.exports=s})();