(()=>{var e={};e.id=514,e.ids=[514],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},74994:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>d});var r=s(50482),a=s(69108),o=s(62563),i=s.n(o),n=s(68300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let d=["",{children:["goods",{children:["edit",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,88011)),"D:\\毕业论文相关\\shop\\manage\\src\\app\\goods\\edit\\[id]\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,21342)),"D:\\毕业论文相关\\shop\\manage\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["D:\\毕业论文相关\\shop\\manage\\src\\app\\goods\\edit\\[id]\\page.tsx"],c="/goods/edit/[id]/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/goods/edit/[id]/page",pathname:"/goods/edit/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},69762:(e,t,s)=>{Promise.resolve().then(s.bind(s,88151))},64113:(e,t,s)=>{"use strict";s.d(t,{Ge:()=>u,Ou:()=>l,Y:()=>n,od:()=>i,wZ:()=>d});var r=s(84255),a=s(96806),o=s.n(a);async function i(e){return r.Z.get(`/api/goods?${o().stringify(e)}`)}async function n(e){return r.Z.post("/api/goods",e)}async function l(e){return r.Z.delete(`/api/goods/${e}`)}async function d(e){return r.Z.get(`/api/goods/${e}`)}async function u(e,t){return r.Z.put(`/api/goods/${e}`,t)}},88151:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(95344),a=s(64113),o=s(97605),i=s(8428),n=s(3729);function l(){let e=(0,i.useParams)(),t=e.id,[s,l]=(0,n.useState)({});return(0,n.useEffect)(()=>{(async()=>{if(t){let e=await (0,a.wZ)(t);console.log(e),l(e.data)}})()},[e]),r.jsx(o.default,{title:"商品编辑",data:s})}},97605:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A});var r=s(95344),a=s(3729),o=s(31529),i=s(58535),n=s(54401),l=s(85787),d=s(89131),u=s(72472),c=s(4953),p=s(56934),m=s(49109),x=s(93401),g=s(96804),h=s(64113),f=s(8428),y=s(73475),j=s.n(y),b=s(48869),q=s.n(b),Z=s(60551),_=s(10910),v=s(19962),P=s(46793);let{TextArea:w}=n.default;function A({title:e,data:t}){let s=(0,f.useRouter)(),[y,b]=(0,a.useState)([]),[A]=l.Z.useForm(),[G,S]=(0,a.useState)(!1),[I,k]=(0,a.useState)(),E=JSON.parse(localStorage.getItem("user")||"").info,[C,$]=(0,a.useState)(!1),[O,T]=(0,a.useState)(""),[z,D]=(0,a.useState)(""),[F,L]=(0,a.useState)([]);(0,a.useEffect)(()=>{console.log(t),t?._id&&(A.setFieldsValue({...t,createdAt:q()(t.createdAt),category:t?.category?._id}),L(t.pics))},[t,A]),(0,a.useEffect)(()=>{(0,v.AT)({all:!0}).then(e=>{b(e.data.data)})},[]);let M=async e=>{e.createdAt&&(e.createdAt=q()(e.createdAt).valueOf()),e.pics=F,e.seller=E._id,t?._id?(await (0,h.Ge)(t?._id,e),d.ZP.success("更新成功")):(console.log("values",e),await (0,h.Y)(e),d.ZP.success("创建成功")),s.push("/goods")};(0,a.useEffect)(()=>{(async()=>{await (0,_.g)().then(e=>{console.log("token",e.data.token),D(e.data.token)})})()},[]);let N=(0,r.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[G?r.jsx(o.Z,{}):r.jsx(i.Z,{}),r.jsx("div",{style:{marginTop:8},children:"上传"})]});return r.jsx(Z.Z,{title:e,children:(0,r.jsxs)(l.Z,{labelCol:{span:4},wrapperCol:{span:16},layout:"horizontal",onFinish:M,form:A,children:[r.jsx(l.Z.Item,{label:"名称",name:"name",rules:[{required:!0,message:"请输入名称"}],children:r.jsx(n.default,{placeholder:"请输入"})}),r.jsx(l.Z.Item,{label:"分类",name:"category",rules:[{required:!0,message:"请选择分类"}],children:r.jsx(u.default,{placeholder:"请选择",options:y.map(e=>({label:e.name,value:e._id}))})}),r.jsx(l.Z.Item,{label:"上架时间",name:"createdAt",children:r.jsx(c.default,{placeholder:"请选择"})}),r.jsx(l.Z.Item,{label:"价格",name:"price",rules:[{required:!0,message:"请输入价格"}],children:r.jsx(p.Z,{placeholder:"请输入"})}),r.jsx(l.Z.Item,{label:"库存",name:"stock",rules:[{required:!0,message:"请输入库存"}],children:r.jsx(p.Z,{placeholder:"请输入"})}),r.jsx(l.Z.Item,{label:"描述",name:"description",rules:[{required:!0,message:"请输入描述"}],children:r.jsx(w,{placeholder:"请输入",rows:4})}),r.jsx(l.Z.Item,{label:"图片",name:"pics",tooltip:"图片数量不超过10张",children:r.jsx(m.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",action:"http://upload-z2.qiniup.com",data:{token:z},beforeUpload:e=>{let t="image/jpeg"===e.type||"image/png"===e.type;return t||d.ZP.error("You can only upload JPG/PNG file!"),t},fileList:F,onPreview:e=>{console.log(e),T(e.url||e.thumbUrl),$(!0)},onChange:e=>{let t=e.file,s=e.fileList;console.log("fileList",e.fileList);let{uid:r,name:a,type:o,thumbUrl:i,status:n,response:l={}}=t,d={uid:r,name:a,type:o,thumbUrl:i,status:n,url:P._+(l.hash||"")};s.pop(),s.push(d),k(d.url),console.log(s),L([...s])},onRemove:e=>{console.log(e),k("");let t=F.indexOf(e);-1!==t&&(F.splice(t,1),L(F))},children:F.length>9?"":N})}),r.jsx(l.Z.Item,{children:r.jsx(x.Z,{open:C,title:"预览",footer:null,onCancel:()=>{$(!1),T("")},children:r.jsx("img",{alt:"example",style:{width:"100%"},src:O})})}),r.jsx(l.Z.Item,{colon:!1,children:r.jsx(g.ZP,{size:"large",htmlType:"submit",className:j().btn,children:t?._id?"更新":"创建"})})]})})}},73475:e=>{e.exports={btn:"GoodsForm_btn__kvbe7"}},88011:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>o,__esModule:()=>a,default:()=>i});let r=(0,s(86843).createProxy)(String.raw`D:\毕业论文相关\shop\manage\src\app\goods\edit\[id]\page.tsx`),{__esModule:a,$$typeof:o}=r,i=r.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,934,337,411,787,671,806,962,299,102,953,289,242],()=>s(74994));module.exports=r})();