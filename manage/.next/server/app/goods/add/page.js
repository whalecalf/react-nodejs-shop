(()=>{var e={};e.id=247,e.ids=[247],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},56092:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var r=s(50482),a=s(69108),o=s(62563),n=s.n(o),i=s(68300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let c=["",{children:["goods",{children:["add",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,73437)),"D:\\毕业论文相关\\shop\\manage\\src\\app\\goods\\add\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,21342)),"D:\\毕业论文相关\\shop\\manage\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\毕业论文相关\\shop\\manage\\src\\app\\goods\\add\\page.tsx"],u="/goods/add/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/goods/add/page",pathname:"/goods/add",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},22097:(e,t,s)=>{Promise.resolve().then(s.bind(s,97605))},64113:(e,t,s)=>{"use strict";s.d(t,{Ge:()=>d,Ou:()=>l,Y:()=>i,od:()=>n,wZ:()=>c});var r=s(84255),a=s(96806),o=s.n(a);async function n(e){return r.Z.get(`/api/goods?${o().stringify(e)}`)}async function i(e){return r.Z.post("/api/goods",e)}async function l(e){return r.Z.delete(`/api/goods/${e}`)}async function c(e){return r.Z.get(`/api/goods/${e}`)}async function d(e,t){return r.Z.put(`/api/goods/${e}`,t)}},97605:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>G});var r=s(95344),a=s(3729),o=s(31529),n=s(58535),i=s(54401),l=s(85787),c=s(89131),d=s(72472),u=s(4953),p=s(56934),m=s(49109),x=s(93401),g=s(96804),h=s(64113),f=s(8428),y=s(73475),j=s.n(y),b=s(48869),q=s.n(b),Z=s(60551),v=s(10910),_=s(19962),P=s(46793);let{TextArea:w}=i.default;function G({title:e,data:t}){let s=(0,f.useRouter)(),[y,b]=(0,a.useState)([]),[G]=l.Z.useForm(),[A,I]=(0,a.useState)(!1),[S,k]=(0,a.useState)(),E=JSON.parse(localStorage.getItem("user")||"").info,[C,F]=(0,a.useState)(!1),[O,T]=(0,a.useState)(""),[z,D]=(0,a.useState)(""),[L,N]=(0,a.useState)([]);(0,a.useEffect)(()=>{console.log(t),t?._id&&(G.setFieldsValue({...t,createdAt:q()(t.createdAt),category:t?.category?._id}),N(t.pics))},[t,G]),(0,a.useEffect)(()=>{(0,_.AT)({all:!0}).then(e=>{b(e.data.data)})},[]);let $=async e=>{e.createdAt&&(e.createdAt=q()(e.createdAt).valueOf()),e.pics=L,e.seller=E._id,t?._id?(await (0,h.Ge)(t?._id,e),c.ZP.success("更新成功")):(console.log("values",e),await (0,h.Y)(e),c.ZP.success("创建成功")),s.push("/goods")};(0,a.useEffect)(()=>{(async()=>{await (0,v.g)().then(e=>{console.log("token",e.data.token),D(e.data.token)})})()},[]);let M=(0,r.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[A?r.jsx(o.Z,{}):r.jsx(n.Z,{}),r.jsx("div",{style:{marginTop:8},children:"上传"})]});return r.jsx(Z.Z,{title:e,children:(0,r.jsxs)(l.Z,{labelCol:{span:4},wrapperCol:{span:16},layout:"horizontal",onFinish:$,form:G,children:[r.jsx(l.Z.Item,{label:"名称",name:"name",rules:[{required:!0,message:"请输入名称"}],children:r.jsx(i.default,{placeholder:"请输入"})}),r.jsx(l.Z.Item,{label:"分类",name:"category",rules:[{required:!0,message:"请选择分类"}],children:r.jsx(d.default,{placeholder:"请选择",options:y.map(e=>({label:e.name,value:e._id}))})}),r.jsx(l.Z.Item,{label:"上架时间",name:"createdAt",children:r.jsx(u.default,{placeholder:"请选择"})}),r.jsx(l.Z.Item,{label:"价格",name:"price",rules:[{required:!0,message:"请输入价格"}],children:r.jsx(p.Z,{placeholder:"请输入"})}),r.jsx(l.Z.Item,{label:"库存",name:"stock",rules:[{required:!0,message:"请输入库存"}],children:r.jsx(p.Z,{placeholder:"请输入"})}),r.jsx(l.Z.Item,{label:"描述",name:"description",rules:[{required:!0,message:"请输入描述"}],children:r.jsx(w,{placeholder:"请输入",rows:4})}),r.jsx(l.Z.Item,{label:"图片",name:"pics",tooltip:"图片数量不超过10张",children:r.jsx(m.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",action:"http://upload-z2.qiniup.com",data:{token:z},beforeUpload:e=>{let t="image/jpeg"===e.type||"image/png"===e.type;return t||c.ZP.error("You can only upload JPG/PNG file!"),t},fileList:L,onPreview:e=>{console.log(e),T(e.url||e.thumbUrl),F(!0)},onChange:e=>{let t=e.file,s=e.fileList;console.log("fileList",e.fileList);let{uid:r,name:a,type:o,thumbUrl:n,status:i,response:l={}}=t,c={uid:r,name:a,type:o,thumbUrl:n,status:i,url:P._+(l.hash||"")};s.pop(),s.push(c),k(c.url),console.log(s),N([...s])},onRemove:e=>{console.log(e),k("");let t=L.indexOf(e);-1!==t&&(L.splice(t,1),N(L))},children:L.length>9?"":M})}),r.jsx(l.Z.Item,{children:r.jsx(x.Z,{open:C,title:"预览",footer:null,onCancel:()=>{F(!1),T("")},children:r.jsx("img",{alt:"example",style:{width:"100%"},src:O})})}),r.jsx(l.Z.Item,{colon:!1,children:r.jsx(g.ZP,{size:"large",htmlType:"submit",className:j().btn,children:t?._id?"更新":"创建"})})]})})}},73475:e=>{e.exports={btn:"GoodsForm_btn__kvbe7"}},73437:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(25036);let a=(0,s(86843).createProxy)(String.raw`D:\毕业论文相关\shop\manage\src\components\GoodsForm\index.tsx`),{__esModule:o,$$typeof:n}=a,i=a.default;function l(){return r.jsx(i,{title:"商品添加"})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,934,337,411,787,671,806,962,299,102,953,289,242],()=>s(56092));module.exports=r})();