(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3797],{24654:function(){},72290:function(e,t,n){Promise.resolve().then(n.bind(n,73022))},28683:function(e,t,n){"use strict";var r=n(90791);t.Z=r.Z},38302:function(e,t,n){"use strict";var r=n(97814);t.Z=r.Z},6053:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(64090),o=n(81303),c=n(16480),a=n.n(c),l=n(29810),s=n(18606),i=n(79934),u=n(57499),d=n(8985),p=n(6336),f=n(11303),g=n(80316),h=n(76585);let b=e=>{let{paddingXXS:t,lineWidth:n,tagPaddingHorizontal:r,componentCls:o,calc:c}=e,a=c(r).sub(n).equal(),l=c(t).sub(n).equal();return{[o]:Object.assign(Object.assign({},(0,f.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:a,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:"".concat((0,d.bf)(e.lineWidth)," ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadiusSM,opacity:1,transition:"all ".concat(e.motionDurationMid),textAlign:"start",position:"relative",["&".concat(o,"-rtl")]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},["".concat(o,"-close-icon")]:{marginInlineStart:l,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:"all ".concat(e.motionDurationMid),"&:hover":{color:e.colorTextHeading}},["&".concat(o,"-has-color")]:{borderColor:"transparent",["&, a, a:hover, ".concat(e.iconCls,"-close, ").concat(e.iconCls,"-close:hover")]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",["&:not(".concat(o,"-checkable-checked):hover")]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},["> ".concat(e.iconCls," + span, > span + ").concat(e.iconCls)]:{marginInlineStart:a}}),["".concat(o,"-borderless")]:{borderColor:"transparent",background:e.tagBorderlessBg}}},m=e=>{let{lineWidth:t,fontSizeIcon:n,calc:r}=e,o=e.fontSizeSM;return(0,g.TS)(e,{tagFontSize:o,tagLineHeight:(0,d.bf)(r(e.lineHeightSM).mul(o).equal()),tagIconSize:r(n).sub(r(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.colorFillTertiary})},y=e=>({defaultBg:new p.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var C=(0,h.I$)("Tag",e=>b(m(e)),y),x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};let v=r.forwardRef((e,t)=>{let{prefixCls:n,style:o,className:c,checked:l,onChange:s,onClick:i}=e,d=x(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:p,tag:f}=r.useContext(u.E_),g=p("tag",n),[h,b,m]=C(g),y=a()(g,"".concat(g,"-checkable"),{["".concat(g,"-checkable-checked")]:l},null==f?void 0:f.className,c,b,m);return h(r.createElement("span",Object.assign({},d,{ref:t,style:Object.assign(Object.assign({},o),null==f?void 0:f.style),className:y,onClick:e=>{null==s||s(!l),null==i||i(e)}})))});var k=n(82303);let j=e=>(0,k.Z)(e,(t,n)=>{let{textColor:r,lightBorderColor:o,lightColor:c,darkColor:a}=n;return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:r,background:c,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:a,borderColor:a},["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}});var Z=(0,h.bk)(["Tag","preset"],e=>j(m(e)),y);let O=(e,t,n)=>{let r="string"!=typeof n?n:n.charAt(0).toUpperCase()+n.slice(1);return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:e["color".concat(n)],background:e["color".concat(r,"Bg")],borderColor:e["color".concat(r,"Border")],["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}};var S=(0,h.bk)(["Tag","status"],e=>{let t=m(e);return[O(t,"success","Success"),O(t,"processing","Info"),O(t,"error","Error"),O(t,"warning","Warning")]},y),w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};let E=r.forwardRef((e,t)=>{let{prefixCls:n,className:c,rootClassName:d,style:p,children:f,icon:g,color:h,onClose:b,closeIcon:m,closable:y,bordered:x=!0}=e,v=w(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:k,direction:j,tag:O}=r.useContext(u.E_),[E,_]=r.useState(!0);r.useEffect(()=>{"visible"in v&&_(v.visible)},[v.visible]);let N=(0,l.o2)(h),P=(0,l.yT)(h),T=N||P,F=Object.assign(Object.assign({backgroundColor:h&&!T?h:void 0},null==O?void 0:O.style),p),I=k("tag",n),[z,B,M]=C(I),A=a()(I,null==O?void 0:O.className,{["".concat(I,"-").concat(h)]:T,["".concat(I,"-has-color")]:h&&!T,["".concat(I,"-hidden")]:!E,["".concat(I,"-rtl")]:"rtl"===j,["".concat(I,"-borderless")]:!x},c,d,B,M),L=e=>{e.stopPropagation(),null==b||b(e),e.defaultPrevented||_(!1)},[,Q]=(0,s.Z)(y,m,e=>null===e?r.createElement(o.Z,{className:"".concat(I,"-close-icon"),onClick:L}):r.createElement("span",{className:"".concat(I,"-close-icon"),onClick:L},e),null,!1),D="function"==typeof v.onClick||f&&"a"===f.type,H=g||null,R=H?r.createElement(r.Fragment,null,H,f&&r.createElement("span",null,f)):f,q=r.createElement("span",Object.assign({},v,{ref:t,className:A,style:F}),R,Q,N&&r.createElement(Z,{key:"preset",prefixCls:I}),P&&r.createElement(S,{key:"status",prefixCls:I}));return z(D?r.createElement(i.Z,{component:"Tag"},q):q)});E.CheckableTag=v;var _=E},61250:function(e,t,n){"use strict";n.d(t,{DZ:function(){return i},M_:function(){return s},RF:function(){return l},lE:function(){return a},pf:function(){return u},x4:function(){return d}});var r=n(49135),o=n(13374),c=n.n(o);async function a(e){return r.Z.get("/api/users?".concat(c().stringify(e)))}async function l(e){return r.Z.post("/api/users",e)}async function s(e){return r.Z.get("/api/users/".concat(e))}async function i(e){return r.Z.delete("/api/users/".concat(e))}async function u(e,t){return r.Z.put("/api/users/".concat(e),t)}async function d(e){return r.Z.post("/api/users/login",e)}},73022:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r=n(3827),o=n(6053),c=n(81583),a=n(32743),l=n(80588),s=n(65270),i=n(13565),u=n(38302),d=n(28683),p=n(44839),f=n(82047),g=n(52336),h=n(47907),b=n(64090),m=n(59836),y=n.n(m),C=n(89539),x=n.n(C),v=n(61250),k=n(20629),j=n(93812);let Z=[{title:"账号",dataIndex:"name",key:"name",width:170},{title:"用户名",dataIndex:"nickName",key:"nickName"},{title:"状态",dataIndex:"status",key:"status",width:120,render:e=>e===j.Q_.ON?(0,r.jsx)(o.Z,{color:"green",children:"正常"}):(0,r.jsx)(o.Z,{color:"red",children:"禁用"})},{title:"创建",dataIndex:"createdAt",key:"createdAt",render:e=>x()(e).format("YYYY-MM-DD"),width:130}];function O(e){let[t]=c.Z.useForm(),n=(0,h.useRouter)(),[o,m]=(0,b.useState)({current:1,pageSize:20,showSizeChanger:!0,total:0}),[C,x]=(0,b.useState)();async function O(e){let t=await (0,v.lE)({current:o.current,pageSize:o.pageSize,...e});console.log(t);let{data:n}=t;x(n),m({...o,current:1,total:t.total})}(0,b.useEffect)(()=>{O()},[e.visible]);let S=async e=>{m(e);let n=t.getFieldsValue(),{data:r}=await (0,v.lE)({current:e.current,pageSize:e.pageSize,...n});x(r)},w=e=>{n.push("/user/edit/".concat(e))},E=e=>{a.Z.confirm({title:"确定删除?",okText:"确定",cancelText:"取消",async onOk(){await (0,v.DZ)(e),l.ZP.success("删除成功"),O(t.getFieldsValue())}})},_=async e=>{let n=e.status===j.Q_.ON?j.Q_.OFF:j.Q_.ON;await (0,v.pf)(e._id,{...e,status:n}),O(t.getFieldsValue())},N=[...Z,{title:"操作",key:"action",render:(e,t)=>(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(i.ZP,{type:"link",onClick:()=>{w(t._id)},children:"编辑"}),(0,r.jsx)(i.ZP,{type:"link",danger:t.status===j.Q_.ON,onClick:()=>{_(t)},children:t.status===j.Q_.ON?"禁用":"启用"}),(0,r.jsx)(i.ZP,{type:"link",danger:!0,onClick:()=>{E(t._id)},children:"删除"})]})}],P=async e=>{let t=await (0,v.lE)({...e,current:o.current,pageSize:o.pageSize});x(t.data),m({...o,current:1,total:t.total})};return(0,r.jsxs)(k.Z,{title:"用户列表",operation:(0,r.jsx)(i.ZP,{onClick:()=>{n.push("/user/add")},children:"添加"}),children:[(0,r.jsx)(c.Z,{name:"search",form:t,onFinish:P,initialValues:{name:"",status:""},children:(0,r.jsxs)(u.Z,{gutter:24,children:[(0,r.jsx)(d.Z,{span:8,children:(0,r.jsx)(c.Z.Item,{name:"name",label:"名称",children:(0,r.jsx)(p.default,{placeholder:"请输入",allowClear:!0})})}),(0,r.jsx)(d.Z,{span:8,children:(0,r.jsx)(c.Z.Item,{name:"status",label:"状态",children:(0,r.jsx)(f.default,{placeholder:"请选择",options:j.Em,allowClear:!0,showSearch:!0,style:{width:"150"}})})}),(0,r.jsx)(d.Z,{span:8,children:(0,r.jsx)(c.Z.Item,{children:(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(i.ZP,{htmlType:"submit",children:"搜索"}),(0,r.jsx)(i.ZP,{onClick:()=>{console.log(t),t.resetFields()},htmlType:"submit",children:"清空"})]})})})]})}),(0,r.jsx)("div",{className:y().tablewrap,children:(0,r.jsx)(g.Z,{dataSource:C,columns:N,scroll:{x:1e3,y:500},pagination:{...o,showTotal:()=>"共 ".concat(o.total," 条")},onChange:S})})]})}},20629:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(3827);n(64090);var o=n(71583),c=n.n(o);function a(e){let{children:t,title:n,operation:o}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:c().title,children:[n,(0,r.jsx)("span",{className:c().btn,children:o})]}),(0,r.jsx)("div",{className:c().content,children:t})]})}},93812:function(e,t,n){"use strict";var r,o,c,a,l,s,i,u;n.d(t,{Em:function(){return d},N1:function(){return o},Om:function(){return r},Q_:function(){return a},iy:function(){return c}}),(l=r||(r={})).MALE="male",l.FEMALE="female",(s=o||(o={})).BUYER="buyer",s.SELLER="seller",s.ADMIN="admin",(i=c||(c={})).ON="on",i.OFF="off",(u=a||(a={})).ON="on",u.OFF="off";let d=[{label:"正常",value:"on"},{label:"禁用",value:"off"}]},49135:function(e,t,n){"use strict";var r=n(7908),o=n(37134),c=n(80588);t.Z=(e=>{let t=r.Z.create({timeout:5e3,...e});return t.interceptors.request.use(function(e){let t=localStorage.getItem("user"),n=t?JSON.parse(t).token:"";return e.headers.Authorization="Bearer "+n,e},function(e){return Promise.reject(e)}),t.interceptors.response.use(function(e){let{status:t,data:n,message:r}=e;return 200===t?n:401===t?o.default.push("/login"):void c.ZP.error(r||"服务端异常")},function(e){var t,n;return e.response&&401===e.response.status?o.default.push("/login"):(c.ZP.error((null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.message)||"服务端异常"),Promise.reject(e))}),t})({})},59836:function(e){e.exports={tablewrap:"user_tablewrap__8MlwQ"}},71583:function(e){e.exports={content:"Content_content__iP7sw",title:"Content_title__y3NnI",btn:"Content_btn__bySTU"}}},function(e){e.O(0,[4634,534,3565,7172,1583,7119,3374,1716,1026,1773,8728,491,2422,2971,8069,1744],function(){return e(e.s=72290)}),_N_E=e.O()}]);