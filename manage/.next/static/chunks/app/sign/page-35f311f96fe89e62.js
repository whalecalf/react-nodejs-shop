(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6164],{24654:function(){},39369:function(e,r,n){Promise.resolve().then(n.bind(n,78015))},61250:function(e,r,n){"use strict";n.d(r,{DZ:function(){return l},M_:function(){return o},RF:function(){return u},lE:function(){return i},pf:function(){return c},x4:function(){return d}});var s=n(49135),t=n(13374),a=n.n(t);async function i(e){return s.Z.get("/api/users?".concat(a().stringify(e)))}async function u(e){return s.Z.post("/api/users",e)}async function o(e){return s.Z.get("/api/users/".concat(e))}async function l(e){return s.Z.delete("/api/users/".concat(e))}async function c(e,r){return s.Z.put("/api/users/".concat(e),r)}async function d(e){return s.Z.post("/api/users/login",e)}},78015:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return Z}});var s=n(3827);n(64090);var t=n(82047),a=n(81583),i=n(80588),u=n(44839),o=n(61773),l=n(13565),c=n(97790),d=n.n(c),p=n(61250),f=n(47907);let{Option:m}=t.default,h={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},x={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};function Z(){let[e]=a.Z.useForm(),r=(0,f.useRouter)(),n=async e=>{e.nickName=e.name,(await (0,p.RF)(e)).success&&(i.ZP.success("注册成功"),r.push("/login"))};return(0,s.jsxs)("div",{className:d().container,children:[(0,s.jsx)("h1",{className:d().title,children:"商城用户注册"}),(0,s.jsxs)(a.Z,{...h,form:e,name:"register",onFinish:n,style:{maxWidth:600},scrollToFirstError:!0,labelCol:{span:8},wrapperCol:{span:16},children:[(0,s.jsx)(a.Z.Item,{name:"name",label:"账号",rules:[{required:!0,message:"请输入账号",whitespace:!0}],tooltip:"账号由用户自定义，但不可重复",children:(0,s.jsx)(u.default,{})}),(0,s.jsx)(a.Z.Item,{name:"password",label:"密码",rules:[{required:!0,message:"请输入密码"}],hasFeedback:!0,children:(0,s.jsx)(u.default.Password,{})}),(0,s.jsx)(a.Z.Item,{name:"confirm",label:"确认密码",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},e=>{let{getFieldValue:r}=e;return{validator:(e,n)=>n&&r("password")!==n?Promise.reject(Error("两次密码不一致")):Promise.resolve()}}],children:(0,s.jsx)(u.default.Password,{})}),(0,s.jsx)(a.Z.Item,{name:"phone",label:"手机号",rules:[{required:!0,message:"请输入手机号"}],children:(0,s.jsx)(u.default,{style:{width:"100%"}})}),(0,s.jsx)(a.Z.Item,{label:"角色",name:"role",rules:[{required:!0,message:"请选择角色"}],children:(0,s.jsxs)(o.ZP.Group,{children:[(0,s.jsx)(o.ZP,{value:"buyer",children:"买家"}),(0,s.jsx)(o.ZP,{value:"seller",children:"商家"}),(0,s.jsx)(o.ZP,{value:"admin",children:"管理员"})]})}),(0,s.jsx)(a.Z.Item,{...x,children:(0,s.jsx)(l.ZP,{type:"primary",htmlType:"submit",children:"注册"})})]})]})}},49135:function(e,r,n){"use strict";var s=n(7908),t=n(37134),a=n(80588);r.Z=(e=>{let r=s.Z.create({timeout:5e3,...e});return r.interceptors.request.use(function(e){let r=localStorage.getItem("user"),n=r?JSON.parse(r).token:"";return e.headers.Authorization="Bearer "+n,e},function(e){return Promise.reject(e)}),r.interceptors.response.use(function(e){let{status:r,data:n,message:s}=e;return 200===r?n:401===r?t.default.push("/login"):void a.ZP.error(s||"服务端异常")},function(e){var r,n;return e.response&&401===e.response.status?t.default.push("/login"):(a.ZP.error((null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.message)||"服务端异常"),Promise.reject(e))}),r})({})},97790:function(e){e.exports={container:"sign_container__3hzHJ",btn:"sign_btn__UQqxO",title:"sign_title__fIJ0E"}}},function(e){e.O(0,[4634,534,3565,7172,1583,7119,3374,1716,1026,1773,2971,8069,1744],function(){return e(e.s=39369)}),_N_E=e.O()}]);