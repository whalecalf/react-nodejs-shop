(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1572],{24654:function(){},75091:function(e,t,n){Promise.resolve().then(n.bind(n,11594))},28683:function(e,t,n){"use strict";var r=n(90791);t.Z=r.Z},38302:function(e,t,n){"use strict";var r=n(97814);t.Z=r.Z},6053:function(e,t,n){"use strict";n.d(t,{Z:function(){return P}});var r=n(64090),o=n(81303),c=n(16480),a=n.n(c),l=n(29810),i=n(18606),s=n(79934),u=n(57499),d=n(8985),p=n(6336),g=n(11303),f=n(80316),h=n(76585);let b=e=>{let{paddingXXS:t,lineWidth:n,tagPaddingHorizontal:r,componentCls:o,calc:c}=e,a=c(r).sub(n).equal(),l=c(t).sub(n).equal();return{[o]:Object.assign(Object.assign({},(0,g.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:a,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:"".concat((0,d.bf)(e.lineWidth)," ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadiusSM,opacity:1,transition:"all ".concat(e.motionDurationMid),textAlign:"start",position:"relative",["&".concat(o,"-rtl")]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},["".concat(o,"-close-icon")]:{marginInlineStart:l,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:"all ".concat(e.motionDurationMid),"&:hover":{color:e.colorTextHeading}},["&".concat(o,"-has-color")]:{borderColor:"transparent",["&, a, a:hover, ".concat(e.iconCls,"-close, ").concat(e.iconCls,"-close:hover")]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",["&:not(".concat(o,"-checkable-checked):hover")]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},["> ".concat(e.iconCls," + span, > span + ").concat(e.iconCls)]:{marginInlineStart:a}}),["".concat(o,"-borderless")]:{borderColor:"transparent",background:e.tagBorderlessBg}}},m=e=>{let{lineWidth:t,fontSizeIcon:n,calc:r}=e,o=e.fontSizeSM;return(0,f.TS)(e,{tagFontSize:o,tagLineHeight:(0,d.bf)(r(e.lineHeightSM).mul(o).equal()),tagIconSize:r(n).sub(r(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.colorFillTertiary})},y=e=>({defaultBg:new p.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var C=(0,h.I$)("Tag",e=>b(m(e)),y),v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};let x=r.forwardRef((e,t)=>{let{prefixCls:n,style:o,className:c,checked:l,onChange:i,onClick:s}=e,d=v(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:p,tag:g}=r.useContext(u.E_),f=p("tag",n),[h,b,m]=C(f),y=a()(f,"".concat(f,"-checkable"),{["".concat(f,"-checkable-checked")]:l},null==g?void 0:g.className,c,b,m);return h(r.createElement("span",Object.assign({},d,{ref:t,style:Object.assign(Object.assign({},o),null==g?void 0:g.style),className:y,onClick:e=>{null==i||i(!l),null==s||s(e)}})))});var k=n(82303);let j=e=>(0,k.Z)(e,(t,n)=>{let{textColor:r,lightBorderColor:o,lightColor:c,darkColor:a}=n;return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:r,background:c,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:a,borderColor:a},["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}});var S=(0,h.bk)(["Tag","preset"],e=>j(m(e)),y);let Z=(e,t,n)=>{let r="string"!=typeof n?n:n.charAt(0).toUpperCase()+n.slice(1);return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:e["color".concat(n)],background:e["color".concat(r,"Bg")],borderColor:e["color".concat(r,"Border")],["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}};var O=(0,h.bk)(["Tag","status"],e=>{let t=m(e);return[Z(t,"success","Success"),Z(t,"processing","Info"),Z(t,"error","Error"),Z(t,"warning","Warning")]},y),w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};let T=r.forwardRef((e,t)=>{let{prefixCls:n,className:c,rootClassName:d,style:p,children:g,icon:f,color:h,onClose:b,closeIcon:m,closable:y,bordered:v=!0}=e,x=w(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:k,direction:j,tag:Z}=r.useContext(u.E_),[T,P]=r.useState(!0);r.useEffect(()=>{"visible"in x&&P(x.visible)},[x.visible]);let E=(0,l.o2)(h),_=(0,l.yT)(h),I=E||_,N=Object.assign(Object.assign({backgroundColor:h&&!I?h:void 0},null==Z?void 0:Z.style),p),z=k("tag",n),[B,F,A]=C(z),H=a()(z,null==Z?void 0:Z.className,{["".concat(z,"-").concat(h)]:I,["".concat(z,"-has-color")]:h&&!I,["".concat(z,"-hidden")]:!T,["".concat(z,"-rtl")]:"rtl"===j,["".concat(z,"-borderless")]:!v},c,d,F,A),M=e=>{e.stopPropagation(),null==b||b(e),e.defaultPrevented||P(!1)},[,q]=(0,i.Z)(y,m,e=>null===e?r.createElement(o.Z,{className:"".concat(z,"-close-icon"),onClick:M}):r.createElement("span",{className:"".concat(z,"-close-icon"),onClick:M},e),null,!1),D="function"==typeof x.onClick||g&&"a"===g.type,L=f||null,R=L?r.createElement(r.Fragment,null,L,g&&r.createElement("span",null,g)):g,W=r.createElement("span",Object.assign({},x,{ref:t,className:H,style:N}),R,q,E&&r.createElement(S,{key:"preset",prefixCls:z}),_&&r.createElement(O,{key:"status",prefixCls:z}));return B(D?r.createElement(s.Z,{component:"Tag"},W):W)});T.CheckableTag=x;var P=T},42987:function(e,t,n){"use strict";n.d(t,{AT:function(){return a},GC:function(){return l},lI:function(){return i},m7:function(){return s},y1:function(){return u}});var r=n(49135),o=n(13374),c=n.n(o);async function a(e){return r.Z.get("/api/categories?".concat(c().stringify(e)))}async function l(e){return r.Z.post("/api/categories",e)}async function i(e){return r.Z.delete("/api/categories/".concat(e))}async function s(e){return r.Z.get("/api/categories/".concat(e))}async function u(e,t){return r.Z.put("/api/categories/".concat(e),t)}},11594:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(3827),o=n(6053),c=n(81583),a=n(32743),l=n(80588),i=n(65270),s=n(13565),u=n(38302),d=n(28683),p=n(44839),g=n(82047),f=n(52336),h=n(47907),b=n(64090),m=n(10046),y=n.n(m),C=n(89539),v=n.n(C),x=n(42987),k=n(20629),j=n(94292);let S=[{title:"名称",dataIndex:"name",key:"name",width:170},{title:"级别",dataIndex:"level",key:"level",render:e=>(0,r.jsx)(o.Z,{color:1===e?"green":"cyan",children:"级别".concat(e)})},{title:"所属分类",dataIndex:"parent",key:"parent",width:120,render:e=>{var t;return null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"-"}},{title:"创建",dataIndex:"createdAt",key:"createdAt",render:e=>v()(e).format("YYYY-MM-DD"),width:130}];function Z(){let[e]=c.Z.useForm(),t=(0,h.useRouter)(),[n,o]=(0,b.useState)({current:1,pageSize:20,showSizeChanger:!0,total:0}),[m,C]=(0,b.useState)();async function v(e){let t=await (0,x.AT)({current:n.current,pageSize:n.pageSize,...e});console.log(t);let{data:r}=t.data;C(r),o({...n,current:n.current,total:r.total})}(0,b.useEffect)(()=>{v()},[]);let Z=async t=>{o(t);let n=e.getFieldsValue(),r=await (0,x.AT)({current:t.current,pageSize:t.pageSize,...n});console.log(r);let{data:c}=r;C(c)},O=e=>{t.push("/category/edit/".concat(e))},w=t=>{a.Z.confirm({title:"确定删除?",okText:"确定",cancelText:"取消",async onOk(){await (0,x.lI)(t),l.ZP.success("删除成功"),v(e.getFieldsValue())}})},T=[...S,{title:"操作",key:"action",render:(e,t)=>(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(s.ZP,{type:"link",onClick:()=>{O(t._id)},children:"编辑"}),(0,r.jsx)(s.ZP,{type:"link",danger:!0,onClick:()=>{w(t._id)},children:"删除"})]})}],P=async e=>{let t=await (0,x.AT)({...e,current:n.current,pageSize:n.pageSize});C(t.data),o({...n,current:1,total:t.data.total})};return(0,r.jsxs)(k.Z,{title:"分类列表",operation:(0,r.jsx)(s.ZP,{onClick:()=>{t.push("/category/add")},children:"添加"}),children:[(0,r.jsx)(c.Z,{name:"search",form:e,onFinish:P,initialValues:{name:"",category:""},children:(0,r.jsxs)(u.Z,{gutter:24,children:[(0,r.jsx)(d.Z,{span:8,children:(0,r.jsx)(c.Z.Item,{name:"name",label:"名称",children:(0,r.jsx)(p.default,{placeholder:"请输入",allowClear:!0})})}),(0,r.jsx)(d.Z,{span:8,children:(0,r.jsx)(c.Z.Item,{name:"level",label:"级别",children:(0,r.jsx)(g.default,{placeholder:"请选择",options:j.B,allowClear:!0,showSearch:!0,style:{width:"150"}})})}),(0,r.jsx)(d.Z,{span:8,children:(0,r.jsx)(c.Z.Item,{children:(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(s.ZP,{htmlType:"submit",children:"搜索"}),(0,r.jsx)(s.ZP,{onClick:()=>{console.log(e),e.resetFields()},htmlType:"submit",children:"清空"})]})})})]})}),(0,r.jsx)("div",{className:y().tablewrap,children:(0,r.jsx)(f.Z,{dataSource:m,columns:T,scroll:{x:1e3,y:500},pagination:{...n,showTotal:()=>"共 ".concat(n.total," 条")},onChange:Z})})]})}},20629:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(3827);n(64090);var o=n(71583),c=n.n(o);function a(e){let{children:t,title:n,operation:o}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:c().title,children:[n,(0,r.jsx)("span",{className:c().btn,children:o})]}),(0,r.jsx)("div",{className:c().content,children:t})]})}},94292:function(e,t,n){"use strict";n.d(t,{B:function(){return o}});let r={ONE:1,TWO:2},o=[{label:"级别1",value:r.ONE},{label:"级别2",value:r.TWO}]},49135:function(e,t,n){"use strict";var r=n(7908),o=n(37134),c=n(80588);t.Z=(e=>{let t=r.Z.create({timeout:5e3,...e});return t.interceptors.request.use(function(e){let t=localStorage.getItem("user"),n=t?JSON.parse(t).token:"";return e.headers.Authorization="Bearer "+n,e},function(e){return Promise.reject(e)}),t.interceptors.response.use(function(e){let{status:t,data:n,message:r}=e;return 200===t?n:401===t?o.default.push("/login"):void c.ZP.error(r||"服务端异常")},function(e){var t,n;return e.response&&401===e.response.status?o.default.push("/login"):(c.ZP.error((null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.message)||"服务端异常"),Promise.reject(e))}),t})({})},10046:function(e){e.exports={tablewrap:"category_tablewrap__Vr6oo"}},71583:function(e){e.exports={content:"Content_content__iP7sw",title:"Content_title__y3NnI",btn:"Content_btn__bySTU"}}},function(e){e.O(0,[4634,534,3565,7172,1583,7119,3374,1716,1026,1773,8728,491,2422,2971,8069,1744],function(){return e(e.s=75091)}),_N_E=e.O()}]);