(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9019],{24654:function(){},98049:function(e,t,n){Promise.resolve().then(n.bind(n,73084))},18606:function(e,t,n){"use strict";var r=n(64090),o=n(81303);t.Z=function(e,t,n){let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.createElement(o.Z,null),l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("boolean"==typeof e?!e:void 0===t?!l:!1===t||null===t)return[!1,null];let a="boolean"==typeof t||null==t?c:t;return[!0,n?n(a):a]}},42434:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(64090);function o(){let[,e]=r.useReducer(e=>e+1,0);return e}},28683:function(e,t,n){"use strict";var r=n(90791);t.Z=r.Z},38302:function(e,t,n){"use strict";var r=n(97814);t.Z=r.Z},6053:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var r=n(64090),o=n(81303),c=n(16480),l=n.n(c),a=n(29810),i=n(18606),s=n(79934),u=n(57499),d=n(8985),p=n(6336),f=n(11303),g=n(80316),h=n(76585);let m=e=>{let{paddingXXS:t,lineWidth:n,tagPaddingHorizontal:r,componentCls:o,calc:c}=e,l=c(r).sub(n).equal(),a=c(t).sub(n).equal();return{[o]:Object.assign(Object.assign({},(0,f.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:l,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:"".concat((0,d.bf)(e.lineWidth)," ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadiusSM,opacity:1,transition:"all ".concat(e.motionDurationMid),textAlign:"start",position:"relative",["&".concat(o,"-rtl")]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},["".concat(o,"-close-icon")]:{marginInlineStart:a,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:"all ".concat(e.motionDurationMid),"&:hover":{color:e.colorTextHeading}},["&".concat(o,"-has-color")]:{borderColor:"transparent",["&, a, a:hover, ".concat(e.iconCls,"-close, ").concat(e.iconCls,"-close:hover")]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",["&:not(".concat(o,"-checkable-checked):hover")]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},["> ".concat(e.iconCls," + span, > span + ").concat(e.iconCls)]:{marginInlineStart:l}}),["".concat(o,"-borderless")]:{borderColor:"transparent",background:e.tagBorderlessBg}}},b=e=>{let{lineWidth:t,fontSizeIcon:n,calc:r}=e,o=e.fontSizeSM;return(0,g.TS)(e,{tagFontSize:o,tagLineHeight:(0,d.bf)(r(e.lineHeightSM).mul(o).equal()),tagIconSize:r(n).sub(r(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.colorFillTertiary})},y=e=>({defaultBg:new p.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var x=(0,h.I$)("Tag",e=>m(b(e)),y),v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};let C=r.forwardRef((e,t)=>{let{prefixCls:n,style:o,className:c,checked:a,onChange:i,onClick:s}=e,d=v(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:p,tag:f}=r.useContext(u.E_),g=p("tag",n),[h,m,b]=x(g),y=l()(g,"".concat(g,"-checkable"),{["".concat(g,"-checkable-checked")]:a},null==f?void 0:f.className,c,m,b);return h(r.createElement("span",Object.assign({},d,{ref:t,style:Object.assign(Object.assign({},o),null==f?void 0:f.style),className:y,onClick:e=>{null==i||i(!a),null==s||s(e)}})))});var j=n(82303);let Z=e=>(0,j.Z)(e,(t,n)=>{let{textColor:r,lightBorderColor:o,lightColor:c,darkColor:l}=n;return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:r,background:c,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:l,borderColor:l},["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}});var k=(0,h.bk)(["Tag","preset"],e=>Z(b(e)),y);let S=(e,t,n)=>{let r="string"!=typeof n?n:n.charAt(0).toUpperCase()+n.slice(1);return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:e["color".concat(n)],background:e["color".concat(r,"Bg")],borderColor:e["color".concat(r,"Border")],["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}};var O=(0,h.bk)(["Tag","status"],e=>{let t=b(e);return[S(t,"success","Success"),S(t,"processing","Info"),S(t,"error","Error"),S(t,"warning","Warning")]},y),w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};let E=r.forwardRef((e,t)=>{let{prefixCls:n,className:c,rootClassName:d,style:p,children:f,icon:g,color:h,onClose:m,closeIcon:b,closable:y,bordered:v=!0}=e,C=w(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:j,direction:Z,tag:S}=r.useContext(u.E_),[E,N]=r.useState(!0);r.useEffect(()=>{"visible"in C&&N(C.visible)},[C.visible]);let I=(0,a.o2)(h),P=(0,a.yT)(h),_=I||P,T=Object.assign(Object.assign({backgroundColor:h&&!_?h:void 0},null==S?void 0:S.style),p),z=j("tag",n),[F,B,M]=x(z),L=l()(z,null==S?void 0:S.className,{["".concat(z,"-").concat(h)]:_,["".concat(z,"-has-color")]:h&&!_,["".concat(z,"-hidden")]:!E,["".concat(z,"-rtl")]:"rtl"===Z,["".concat(z,"-borderless")]:!v},c,d,B,M),R=e=>{e.stopPropagation(),null==m||m(e),e.defaultPrevented||N(!1)},[,A]=(0,i.Z)(y,b,e=>null===e?r.createElement(o.Z,{className:"".concat(z,"-close-icon"),onClick:R}):r.createElement("span",{className:"".concat(z,"-close-icon"),onClick:R},e),null,!1),D="function"==typeof C.onClick||f&&"a"===f.type,H=g||null,q=H?r.createElement(r.Fragment,null,H,f&&r.createElement("span",null,f)):f,Y=r.createElement("span",Object.assign({},C,{ref:t,className:L,style:T}),q,A,I&&r.createElement(k,{key:"preset",prefixCls:z}),P&&r.createElement(O,{key:"status",prefixCls:z}));return F(D?r.createElement(s.Z,{component:"Tag"},Y):Y)});E.CheckableTag=C;var N=E},72518:function(e,t,n){"use strict";n.d(t,{R0:function(){return i},iW:function(){return a},m:function(){return l}});var r=n(49135),o=n(13374),c=n.n(o);async function l(e){return r.Z.get("/api/logs?".concat(c().stringify(e)))}async function a(e){return r.Z.post("/api/logs",e)}async function i(e){return r.Z.get("/api/logs/".concat(e))}},61250:function(e,t,n){"use strict";n.d(t,{DZ:function(){return s},M_:function(){return i},RF:function(){return a},lE:function(){return l},pf:function(){return u},x4:function(){return d}});var r=n(49135),o=n(13374),c=n.n(o);async function l(e){return r.Z.get("/api/users?".concat(c().stringify(e)))}async function a(e){return r.Z.post("/api/users",e)}async function i(e){return r.Z.get("/api/users/".concat(e))}async function s(e){return r.Z.delete("/api/users/".concat(e))}async function u(e,t){return r.Z.put("/api/users/".concat(e),t)}async function d(e){return r.Z.post("/api/users/login",e)}},73084:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r=n(3827),o=n(20629),c=n(54547),l=n(6053),a=n(81583),i=n(65270),s=n(13565),u=n(38302),d=n(28683),p=n(44839),f=n(82047),g=n(52336),h=n(13529),m=n.n(h),b=n(89539),y=n.n(b),x=n(47907),v=n(64090),C=n(72518),j=n(61250),Z=n(93812);let k=[{title:"操作名称",dataIndex:"name",key:"name",width:170},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0,width:300,render:e=>(0,r.jsx)(c.Z,{title:e,placement:"topLeft",children:e})},{title:"操作类型",dataIndex:"type",key:"type",width:170,render:e=>"新增"==e?(0,r.jsx)(l.Z,{color:"green",children:e}):"删除"==e?(0,r.jsx)(l.Z,{color:"red",children:e}):"修改"==e?(0,r.jsx)(l.Z,{color:"yellow",children:e}):void 0},{title:"ip地址",dataIndex:"address",key:"address",width:170},{title:"操作用户",dataIndex:"user",key:"user",width:170,render:e=>(console.log(e),e.nickName)},{title:"操作时间",dataIndex:"time",key:"time",render:e=>y()(e).format("YYYY-MM-DD"),width:130}];function S(){let[e]=a.Z.useForm(),t=(0,x.useRouter)(),[n,c]=(0,v.useState)({current:1,pageSize:20,showSizeChanger:!0,total:0}),[l,h]=(0,v.useState)(),[b,y]=(0,v.useState)([]);async function S(e){let t=await (0,C.m)({current:n.current,pageSize:n.pageSize,...e}),{data:r}=t;h(r),c({...n,current:1,total:t.total})}(0,v.useEffect)(()=>{S(),(0,j.lE)({role:Z.N1.ADMIN}).then(e=>{y(e.data)})},[]);let O=async t=>{c(t);let n=e.getFieldValue(name);h((await (0,C.m)({current:t.current,pageSize:t.pageSize,...n})).data)},w=async e=>{t.push("/log/show/".concat(e))},E=[...k,{title:"操作",key:"action",render:(e,t)=>(0,r.jsx)(i.Z,{children:(0,r.jsx)(s.ZP,{color:"green",type:"link",onClick:()=>{w(t._id)},children:"查看"})})}],N=async e=>{let t=await (0,C.m)({...e,current:n.current,pageSize:n.pageSize});h(t.data),c({...n,current:1,total:t.total})};return(0,r.jsxs)(o.Z,{title:"日志列表",operation:(0,r.jsx)(s.ZP,{onClick:()=>{t.push("/log/add")},children:"添加"}),children:[(0,r.jsx)(a.Z,{name:"search",form:e,onFinish:N,initialValues:{name:"",category:""},children:(0,r.jsxs)(u.Z,{gutter:24,children:[(0,r.jsx)(d.Z,{span:6,children:(0,r.jsx)(a.Z.Item,{name:"name",label:"操作名称",children:(0,r.jsx)(p.default,{placeholder:"请输入",allowClear:!0})})}),(0,r.jsx)(d.Z,{span:6,children:(0,r.jsx)(a.Z.Item,{name:"user",label:"操作用户",children:(0,r.jsx)(f.default,{placeholder:"请选择",options:b.map(e=>({label:e.name,value:e._id})),optionFilterProp:"label",allowClear:!0,showSearch:!0,style:{width:"150"}})})}),(0,r.jsx)(d.Z,{span:6,children:(0,r.jsx)(a.Z.Item,{label:"操作类型",name:"type",children:(0,r.jsxs)(f.default,{placeholder:"请选择",children:[(0,r.jsx)(f.default.Option,{children:"新增"}),(0,r.jsx)(f.default.Option,{children:"修改"}),(0,r.jsx)(f.default.Option,{children:"删除"})]})})}),(0,r.jsx)(d.Z,{span:6,children:(0,r.jsx)(a.Z.Item,{children:(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(s.ZP,{htmlType:"submit",children:"搜索"}),(0,r.jsx)(s.ZP,{htmlType:"submit",children:"清空"})]})})})]})}),(0,r.jsx)("div",{className:m().tablewrap,children:(0,r.jsx)(g.Z,{dataSource:l,columns:E,scroll:{x:1e3,y:500},pagination:{...n,showTotal:()=>"共 ".concat(n.total," 条")},onChange:O})})]})}},20629:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(3827);n(64090);var o=n(71583),c=n.n(o);function l(e){let{children:t,title:n,operation:o}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:c().title,children:[n,(0,r.jsx)("span",{className:c().btn,children:o})]}),(0,r.jsx)("div",{className:c().content,children:t})]})}},93812:function(e,t,n){"use strict";var r,o,c,l,a,i,s,u;n.d(t,{Em:function(){return d},N1:function(){return o},Om:function(){return r},Q_:function(){return l},iy:function(){return c}}),(a=r||(r={})).MALE="male",a.FEMALE="female",(i=o||(o={})).BUYER="buyer",i.SELLER="seller",i.ADMIN="admin",(s=c||(c={})).ON="on",s.OFF="off",(u=l||(l={})).ON="on",u.OFF="off";let d=[{label:"正常",value:"on"},{label:"禁用",value:"off"}]},49135:function(e,t,n){"use strict";var r=n(7908),o=n(37134),c=n(80588);t.Z=(e=>{let t=r.Z.create({timeout:5e3,...e});return t.interceptors.request.use(function(e){let t=localStorage.getItem("user"),n=t?JSON.parse(t).token:"";return e.headers.Authorization="Bearer "+n,e},function(e){return Promise.reject(e)}),t.interceptors.response.use(function(e){let{status:t,data:n,message:r}=e;return 200===t?n:401===t?o.default.push("/login"):void c.ZP.error(r||"服务端异常")},function(e){var t,n;return e.response&&401===e.response.status?o.default.push("/login"):(c.ZP.error((null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.message)||"服务端异常"),Promise.reject(e))}),t})({})},13529:function(e){e.exports={tablewrap:"log_tablewrap__82sky"}},71583:function(e){e.exports={content:"Content_content__iP7sw",title:"Content_title__y3NnI",btn:"Content_btn__bySTU"}}},function(e){e.O(0,[4634,534,3565,7172,1583,7119,3374,1716,1026,1773,491,2422,2971,8069,1744],function(){return e(e.s=98049)}),_N_E=e.O()}]);