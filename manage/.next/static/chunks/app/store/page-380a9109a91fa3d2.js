(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3114],{24654:function(){},14588:function(e,t,n){Promise.resolve().then(n.bind(n,62951))},6053:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var o=n(64090),r=n(81303),c=n(16480),a=n.n(c),l=n(29810),i=n(18606),s=n(79934),u=n(57499),d=n(8985),p=n(6336),g=n(11303),f=n(80316),b=n(76585);let h=e=>{let{paddingXXS:t,lineWidth:n,tagPaddingHorizontal:o,componentCls:r,calc:c}=e,a=c(o).sub(n).equal(),l=c(t).sub(n).equal();return{[r]:Object.assign(Object.assign({},(0,g.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:a,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:"".concat((0,d.bf)(e.lineWidth)," ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadiusSM,opacity:1,transition:"all ".concat(e.motionDurationMid),textAlign:"start",position:"relative",["&".concat(r,"-rtl")]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},["".concat(r,"-close-icon")]:{marginInlineStart:l,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:"all ".concat(e.motionDurationMid),"&:hover":{color:e.colorTextHeading}},["&".concat(r,"-has-color")]:{borderColor:"transparent",["&, a, a:hover, ".concat(e.iconCls,"-close, ").concat(e.iconCls,"-close:hover")]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",["&:not(".concat(r,"-checkable-checked):hover")]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},["> ".concat(e.iconCls," + span, > span + ").concat(e.iconCls)]:{marginInlineStart:a}}),["".concat(r,"-borderless")]:{borderColor:"transparent",background:e.tagBorderlessBg}}},m=e=>{let{lineWidth:t,fontSizeIcon:n,calc:o}=e,r=e.fontSizeSM;return(0,f.TS)(e,{tagFontSize:r,tagLineHeight:(0,d.bf)(o(e.lineHeightSM).mul(r).equal()),tagIconSize:o(n).sub(o(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.colorFillTertiary})},y=e=>({defaultBg:new p.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var C=(0,b.I$)("Tag",e=>h(m(e)),y),k=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)0>t.indexOf(o[r])&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};let v=o.forwardRef((e,t)=>{let{prefixCls:n,style:r,className:c,checked:l,onChange:i,onClick:s}=e,d=k(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:p,tag:g}=o.useContext(u.E_),f=p("tag",n),[b,h,m]=C(f),y=a()(f,"".concat(f,"-checkable"),{["".concat(f,"-checkable-checked")]:l},null==g?void 0:g.className,c,h,m);return b(o.createElement("span",Object.assign({},d,{ref:t,style:Object.assign(Object.assign({},r),null==g?void 0:g.style),className:y,onClick:e=>{null==i||i(!l),null==s||s(e)}})))});var x=n(82303);let S=e=>(0,x.Z)(e,(t,n)=>{let{textColor:o,lightBorderColor:r,lightColor:c,darkColor:a}=n;return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:o,background:c,borderColor:r,"&-inverse":{color:e.colorTextLightSolid,background:a,borderColor:a},["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}});var O=(0,b.bk)(["Tag","preset"],e=>S(m(e)),y);let j=(e,t,n)=>{let o="string"!=typeof n?n:n.charAt(0).toUpperCase()+n.slice(1);return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:e["color".concat(n)],background:e["color".concat(o,"Bg")],borderColor:e["color".concat(o,"Border")],["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}};var w=(0,b.bk)(["Tag","status"],e=>{let t=m(e);return[j(t,"success","Success"),j(t,"processing","Info"),j(t,"error","Error"),j(t,"warning","Warning")]},y),Z=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)0>t.indexOf(o[r])&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};let P=o.forwardRef((e,t)=>{let{prefixCls:n,className:c,rootClassName:d,style:p,children:g,icon:f,color:b,onClose:h,closeIcon:m,closable:y,bordered:k=!0}=e,v=Z(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:x,direction:S,tag:j}=o.useContext(u.E_),[P,_]=o.useState(!0);o.useEffect(()=>{"visible"in v&&_(v.visible)},[v.visible]);let N=(0,l.o2)(b),T=(0,l.yT)(b),E=N||T,I=Object.assign(Object.assign({backgroundColor:b&&!E?b:void 0},null==j?void 0:j.style),p),z=x("tag",n),[B,F,H]=C(z),M=a()(z,null==j?void 0:j.className,{["".concat(z,"-").concat(b)]:E,["".concat(z,"-has-color")]:b&&!E,["".concat(z,"-hidden")]:!P,["".concat(z,"-rtl")]:"rtl"===S,["".concat(z,"-borderless")]:!k},c,d,F,H),A=e=>{e.stopPropagation(),null==h||h(e),e.defaultPrevented||_(!1)},[,q]=(0,i.Z)(y,m,e=>null===e?o.createElement(r.Z,{className:"".concat(z,"-close-icon"),onClick:A}):o.createElement("span",{className:"".concat(z,"-close-icon"),onClick:A},e),null,!1),D="function"==typeof v.onClick||g&&"a"===g.type,L=f||null,R=L?o.createElement(o.Fragment,null,L,g&&o.createElement("span",null,g)):g,W=o.createElement("span",Object.assign({},v,{ref:t,className:M,style:I}),R,q,N&&o.createElement(O,{key:"preset",prefixCls:z}),T&&o.createElement(w,{key:"status",prefixCls:z}));return B(D?o.createElement(s.Z,{component:"Tag"},W):W)});P.CheckableTag=v;var _=P},83881:function(e,t,n){"use strict";n.d(t,{JC:function(){return u},T$:function(){return s},Wj:function(){return l},dX:function(){return a},tx:function(){return i}});var o=n(49135),r=n(13374),c=n.n(r);async function a(e){return o.Z.get("/api/store?".concat(c().stringify(e)))}async function l(e){return o.Z.post("/api/store",e)}async function i(e){return o.Z.get("/api/store/".concat(e))}async function s(e){return o.Z.delete("/api/store/".concat(e))}async function u(e,t){return o.Z.put("/api/store/".concat(e),t)}},62951:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o,r,c=n(3827),a=n(20629),l=n(6053),i=n(32743),s=n(80588),u=n(65270),d=n(13565),p=n(52336),g=n(46534),f=n.n(g),b=n(47907),h=n(64090),m=n(89539),y=n.n(m),C=n(83881);(o=r||(r={})).ON="on",o.OFF="off";let k=[{title:"名称",dataIndex:"name",key:"name",width:170},{title:"状态",dataIndex:"status",key:"status",render:e=>e===r.ON?(0,c.jsx)(l.Z,{color:"green",children:"正常"}):(0,c.jsx)(l.Z,{color:"red",children:"禁用"})},{title:"注册资金",dataIndex:"capital",key:"capital",width:170},{title:"创建日期",dataIndex:"createdAt",key:"createdAt",render:e=>y()(e).format("YYYY-MM-DD"),width:130}];function v(){let e=(0,b.useRouter)(),[t,n]=(0,h.useState)({current:1,pageSize:20,showSizeChanger:!0,total:0}),[o,r]=(0,h.useState)();async function l(e){let o=await (0,C.dX)({current:t.current,pageSize:t.pageSize,owner:JSON.parse(localStorage.getItem("user")||"").info._id,...e});console.log(o);let{data:c}=o;r(c),n({...t,current:1,total:o.total})}(0,h.useEffect)(()=>{l()},[]);let g=t=>{e.push("/store/edit/".concat(t))},m=e=>{i.Z.confirm({title:"确定删除?",okText:"确定",cancelText:"取消",async onOk(){await (0,C.T$)(e),s.ZP.success("删除成功"),l()}})},y=[...k,{title:"操作",key:"action",render:(e,t)=>(0,c.jsxs)(u.Z,{children:[(0,c.jsx)(d.ZP,{type:"link",onClick:()=>{g(t._id)},children:"编辑"}),(0,c.jsx)(d.ZP,{type:"link",danger:!0,onClick:()=>{m(t._id)},children:"删除"})]})}];return(0,c.jsx)(a.Z,{title:"店铺列表",operation:(0,c.jsx)(d.ZP,{onClick:()=>{e.push("/store/add")},children:"添加"}),children:(0,c.jsx)("div",{className:f().tablewrap,children:(0,c.jsx)(p.Z,{dataSource:o,columns:y,scroll:{x:1e3,y:500},pagination:{...t,showTotal:()=>"共 ".concat(t.total," 条")},onChange:e=>{n(e),(0,C.dX)({current:e.current,pageSize:e.pageSize})}})})})}},20629:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var o=n(3827);n(64090);var r=n(71583),c=n.n(r);function a(e){let{children:t,title:n,operation:r}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:c().title,children:[n,(0,o.jsx)("span",{className:c().btn,children:r})]}),(0,o.jsx)("div",{className:c().content,children:t})]})}},49135:function(e,t,n){"use strict";var o=n(7908),r=n(37134),c=n(80588);t.Z=(e=>{let t=o.Z.create({timeout:5e3,...e});return t.interceptors.request.use(function(e){let t=localStorage.getItem("user"),n=t?JSON.parse(t).token:"";return e.headers.Authorization="Bearer "+n,e},function(e){return Promise.reject(e)}),t.interceptors.response.use(function(e){let{status:t,data:n,message:o}=e;return 200===t?n:401===t?r.default.push("/login"):void c.ZP.error(o||"服务端异常")},function(e){var t,n;return e.response&&401===e.response.status?r.default.push("/login"):(c.ZP.error((null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.message)||"服务端异常"),Promise.reject(e))}),t})({})},46534:function(e){e.exports={tablewrap:"store_tablewrap__3VPQb"}},71583:function(e){e.exports={content:"Content_content__iP7sw",title:"Content_title__y3NnI",btn:"Content_btn__bySTU"}}},function(e){e.O(0,[4634,534,3565,7172,7119,3374,1716,1026,1773,8728,491,2422,2971,8069,1744],function(){return e(e.s=14588)}),_N_E=e.O()}]);